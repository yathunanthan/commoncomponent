import { __awaiter } from "tslib";
import { Component, Output, EventEmitter, Input } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "../serivces/common-payment.service";
import * as i2 from "./payment-bank-details/payment-bank-details.component";
import * as i3 from "./payment-card-details/payment-card-details.component";
import * as i4 from "../payment-complete/payment-complete.component";
import * as i5 from "@angular/common";
export class PaymentDetailsComponent {
    constructor(commonService) {
        this.commonService = commonService;
        this.paymentMethodType = 'Bank transfer';
        this.devicePayment = false;
        this.testResult = "testResult";
        this.total = 0;
        this.paymentSelect = 'credit';
        this.paymentMethodAllowed = 3;
        this.paymentMethod = 1;
        this.paymentCompleted = true;
        this.canDoWalletPay = false;
        this.walletPayLogoName = '';
        this.walletPayDesc = '';
        this.tax = 0;
        this.amount = 0;
        this.emitter = new EventEmitter();
        this.payEmitter = new EventEmitter();
        this.payOptionEmitter = new EventEmitter();
    }
    valid(paymentEnable) {
        this.paymentEnable = paymentEnable;
        this.payEmitter.emit(paymentEnable);
    }
    ngOnInit() {
        var _a, _b, _c, _d, _e, _f;
        this.commonService.userUrl$.subscribe((res) => {
            this.portalName = res === null || res === void 0 ? void 0 : res.portal;
        });
        this.commonService.paymentDetails$.subscribe((response) => {
            this.genericPaymentDetails = response;
        });
        console.log('paymentSelectedOptions', this.paymentSelectedOptions);
        console.log('portalname', this.portalName);
        console.log('statemtn', this.genericPaymentDetails);
        if (((_a = this.commonService.apiUrl) === null || _a === void 0 ? void 0 : _a.portal) == 'InvoicePortal') {
            this.amountToBePaid = this.genericPaymentDetails.paymentDetails.amountToBePaid;
            this.pendingAmount = this.genericPaymentDetails.paymentDetails.pendingAmount;
            this.paymentCompleted = (this.amountToBePaid - this.genericPaymentDetails.paymentDetails.pendingAmount) < 1;
            this.paymentMethod = this.genericPaymentDetails.isGocardlessEnabled && this.genericPaymentDetails.customerDetails.postcode ? 1 : (this.genericPaymentDetails.cardIntegration && this.genericPaymentDetails.cardCharges != -1 && (this.genericPaymentDetails.isBasysEnabled || this.genericPaymentDetails.isPayFortEnabled || this.genericPaymentDetails.isStripeEnabled || this.genericPaymentDetails.isWorldPayEnbled) && (!this.settings.cardEnable || this.settings.cardEnable == 'Always' || this.genericPaymentDetails.invoiceDetails.total + this.genericPaymentDetails.invoiceDetails.taxes + this.genericPaymentDetails.invoiceDetails.total * (this.tip / 100) + (this.genericPaymentDetails.cardCharges[this.genericPaymentDetails.cardCharges].charge / 100) * (this.genericPaymentDetails.invoiceDetails.total + this.genericPaymentDetails.invoiceDetails.taxes + this.genericPaymentDetails.invoiceDetails.total * (this.tip / 100)) <= this.settings.creditDebitCard)) ? 2 : 0;
            this.clientTelephone = this.genericPaymentDetails.clientDetails.countrycode + this.genericPaymentDetails.clientDetails.telephone;
            // this.canWalletPay();
        }
        else if (((_b = this.commonService.apiUrl) === null || _b === void 0 ? void 0 : _b.portal) == 'StatementPortal') {
            this.paymentMethod = this.genericPaymentDetails.isGocardlessEnabled && this.genericPaymentDetails.customerDetails.postcode ? 1 : (this.genericPaymentDetails.cardIntegration && (this.genericPaymentDetails.isStripeEnabled || this.genericPaymentDetails.isWorldPayEnbled || this.genericPaymentDetails.isPayFort) && (this.settings.cardEnable == undefined || (this.settings.cardEnable != 'No' && (this.settings.cardEnable == 'Always' || this.total <= this.settings.creditDebitCard)))) ? 2 : 0;
            this.clientTelephone = this.genericPaymentDetails.client_telephone;
            // this.canWalletPay();
        }
        else if (((_c = this.commonService.apiUrl) === null || _c === void 0 ? void 0 : _c.portal) == 'ServiceReminderBooking') {
            this.settings = this.genericPaymentDetails.settings.reduce((obj, item) => Object.assign(obj, { [item.key]: item.value }), {});
            let jobDescriptionPricingItems = this.genericPaymentDetails.jobDescriptionPricingItems;
            for (let n = 0; n < jobDescriptionPricingItems.length; ++n) {
                this.amount = this.amount + parseInt(jobDescriptionPricingItems[n].unitprice);
                this.tax = this.tax + parseInt(jobDescriptionPricingItems[n].unitprice) * parseInt(jobDescriptionPricingItems[0].taxRate) / 100;
            }
            this.genericPaymentDetails['amount'] = this.amount;
            this.paymentMethod = this.genericPaymentDetails.paymentDetails.cardIntegration && (this.genericPaymentDetails.paymentDetails.isPayFortEnabled || this.genericPaymentDetails.paymentDetails.isStripeEnabled || this.genericPaymentDetails.paymentDetails.isWorldPayEnbled) && (!this.settings.cardEnable || this.settings.cardEnable == 'Always' || this.amount + (this.genericPaymentDetails.paymentDetails.cardCharges[this.commonService.cardCharges.length].charge / 100) * this.amount <= this.settings.creditDebitCard) ? 2 : 0;
            this.clientTelephone = this.genericPaymentDetails.client_telephone;
        }
        this.isGocardlessEnabled = this.genericPaymentDetails.isGocardlessEnabled;
        this.postCode = ((_e = (_d = this.genericPaymentDetails) === null || _d === void 0 ? void 0 : _d.customerDetails) === null || _e === void 0 ? void 0 : _e.postcode) ? (_f = this.genericPaymentDetails) === null || _f === void 0 ? void 0 : _f.customerDetails.postcode : this.genericPaymentDetails['postcode'];
        this.commonService.setUserResponse(this.genericPaymentDetails, '');
        if ("settings" in this.genericPaymentDetails) {
            this.settings = this.genericPaymentDetails.settings.reduce((obj, item) => Object.assign(obj, { [item.key]: item.value }), {});
            this.paymentMethodType = this.settings.countryRegion == 6 ? 'ACH' : 'Bank transfer';
        }
        else {
            this.paymentMethodType = this.genericPaymentDetails.countryRegion == 6 ? 'ACH' : 'Bank transfer';
        }
        setTimeout(() => {
            this.paymentSelected(this.paymentMethod);
        }, 100);
        this.emitter.emit(this.paymentMethodType);
    }
    canWalletPay() {
        this.canDoWalletPay = false;
        this.genericPaymentDetails.isWalletPayEnabled = true;
        if (this.genericPaymentDetails.isStripeEnabled && this.genericPaymentDetails.isWalletPayEnabled) {
            let amountToBePaid = this.commonService.roundAmount(parseFloat(this.genericPaymentDetails.paymentDetails.amountToBePaid));
            let stripeWalletPayCharges = 0;
            let chargePct = parseFloat(this.genericPaymentDetails.WalletPayPaymentCharges);
            if (chargePct > 0) {
                stripeWalletPayCharges = this.commonService.roundAmount((chargePct / 100) * amountToBePaid);
            }
            let totalToBePaid = this.commonService.roundAmount(amountToBePaid + stripeWalletPayCharges);
            if (this.settings.cardEnable == 'EnableWhenAmountAt' && totalToBePaid > this.settings.creditDebitCard) {
                return;
            }
            //https://stripe.com/docs/js/initializing
            const stripe = window.Stripe(atob(this.genericPaymentDetails.pk_token), { stripeAccount: this.genericPaymentDetails.stripeConnectedAccountId });
            const paymentRequest = stripe.paymentRequest({
                country: this.genericPaymentDetails.clientDetails.countryNameCode,
                currency: this.genericPaymentDetails.currencyCode.toLowerCase(),
                total: {
                    label: 'Demo total',
                    amount: 1,
                },
                requestPayerName: true,
                requestPayerEmail: true,
            });
            (() => __awaiter(this, void 0, void 0, function* () {
                // Check the availability of the Payment Request API first.
                const result = yield paymentRequest.canMakePayment();
                console.log('canMakePayment', result);
                if (result) {
                    this.canDoWalletPay = true;
                    if (result.applePay) {
                        this.walletPayDesc = 'Apple Pay';
                        this.walletPayLogoName = 'ApplePay';
                    }
                    else if (result.googlePay) {
                        this.walletPayDesc = 'Google Pay';
                        this.walletPayLogoName = 'GooglePay';
                    }
                    else if (result.link) {
                        this.walletPayDesc = 'Pay via Link';
                        this.walletPayLogoName = 'LinkPay';
                    }
                    else {
                        this.walletPayDesc = 'WalletPay';
                        this.walletPayLogoName = 'Wallet';
                    }
                    console.log("Can make Wallet payments.");
                }
                else {
                    console.log("Cannot make Wallet payments.");
                }
            }))();
        }
    }
    changePaymentOption(option, selected) {
        this.paymentOption = option;
        if (selected == true) {
            if (this.paymentOption == 'debit') {
                this.payOptionEmitter.emit(option);
            }
            else if (this.paymentOption == 'credit') {
                this.payOptionEmitter.emit(option);
            }
        }
    }
    paymentSelected(value) {
        var temp = this.paymentMethod != value;
        if (value > 0) {
            this.paymentMethod = value;
            this.emitter.emit(value);
            var check = document.getElementById(value);
            if (check) {
                check.checked = true;
            }
            if (temp) {
                this.payEmitter.emit(true);
            }
        }
    }
}
PaymentDetailsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: PaymentDetailsComponent, deps: [{ token: i1.CommonPaymentService }], target: i0.ɵɵFactoryTarget.Component });
PaymentDetailsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: PaymentDetailsComponent, selector: "lib-payment-details", inputs: { genericPaymentDetails: "genericPaymentDetails", tip: "tip", total: "total", paymentSelectedOptions: "paymentSelectedOptions" }, outputs: { emitter: "emitter", payEmitter: "payEmitter", payOptionEmitter: "payOptionEmitter" }, ngImport: i0, template: "<div class=\"row pay-body\">\n    <div class=\"pay-title-box\">\n        <div class=\"pay-title\">Payment details</div>\n        <div class=\"pay-details\">\n            <span\n                *ngIf=\"portalName == 'InvoicePortal' && (amountToBePaid - (pendingAmount ? pendingAmount : 0)) >0\">Please\n                fill the information below about your payment method</span>\n            <span *ngIf=\"portalName == 'StatementPortal' || portalName == 'AcceptProposal' || portalName == 'ServiceReminderBooking'\">Please fill the information\n                below about your payment method</span>\n        </div>\n        <div class=\"pay-details\"\n            *ngIf=\"portalName == 'InvoicePortal' && (amountToBePaid - (pendingAmount ? pendingAmount : 0)) <= 0\">\n            Payment status and summary information</div>\n    </div>\n    <div class=\"pay-selection\"\n        *ngIf=\"(amountToBePaid - pendingAmount) >0 || portalName == 'StatementPortal' || portalName == 'AcceptProposal' || portalName == 'ServiceReminderBooking' \">\n\n        <div class=\"col pay-width\">Pay with</div>\n        <div class=\"row width-q\">\n            <div *ngIf=\"isGocardlessEnabled && postCode || portalName != 'ServiceReminderBooking'\" class=\"col pay-btn\" (click)=\"paymentSelected(1)\"\n                [ngClass]=\"{'pay-btn-active' : paymentMethod == '1'}\">\n                <div *ngIf=\"portalName == 'AcceptProposal'\"><input type=\"radio\" name=\"payWith\" id=\"1\"\n                        (click)=\"changePaymentOption('debit',true)\" [checked]=\"paymentSelect=='debit'\"></div>\n                <div *ngIf=\"portalName != 'AcceptProposal'\"><input type=\"radio\" name=\"payWith\" id=\"1\"></div>\n                <span class=\"pay-btn-text\">{{paymentMethodType }}</span>\n                <svg width=\"20\" height=\"16\" viewBox=\"0 0 20 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path\n                        d=\"M13 10V7H16V5L20 8.5L16 12V10H13ZM12 3.7V5H0V3.7L6 0L12 3.7ZM5 6H7V11H5V6ZM1 6H3V11H1V6ZM11 6V8.5L9 10.3V6H11ZM7.1 12L6.5 12.5L8.2 14H0V12H7.1ZM15 11V14H12V16L8 12.5L12 9V11H15Z\"\n                        fill=\"#505B65\" />\n                </svg>\n\n            </div>\n            <div class=\"col pay-btn\" (click)=\"paymentSelected(2)\" [ngClass]=\"{'pay-btn-active' : paymentMethod == '2'}\">\n                <div *ngIf=\"portalName == 'AcceptProposal'\"><input type=\"radio\" name=\"payWith\" id=\"1\"\n                        (click)=\"changePaymentOption('credit',true)\" [checked]=\"paymentSelect=='credit'\"></div>\n                <div *ngIf=\"portalName != 'AcceptProposal'\"><input type=\"radio\" name=\"payWith\" id=\"1\"></div>\n                <span class=\"pay-btn-text\">Debit or credit card</span>\n                <svg width=\"20\" height=\"14\" viewBox=\"0 0 20 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path\n                        d=\"M17 0H3C2.20435 0 1.44129 0.316071 0.87868 0.87868C0.316071 1.44129 0 2.20435 0 3V11C0 11.7956 0.316071 12.5587 0.87868 13.1213C1.44129 13.6839 2.20435 14 3 14H17C17.7956 14 18.5587 13.6839 19.1213 13.1213C19.6839 12.5587 20 11.7956 20 11V3C20 2.20435 19.6839 1.44129 19.1213 0.87868C18.5587 0.316071 17.7956 0 17 0ZM9 10H5C4.73478 10 4.48043 9.89464 4.29289 9.70711C4.10536 9.51957 4 9.26522 4 9C4 8.73478 4.10536 8.48043 4.29289 8.29289C4.48043 8.10536 4.73478 8 5 8H9C9.26522 8 9.51957 8.10536 9.70711 8.29289C9.89464 8.48043 10 8.73478 10 9C10 9.26522 9.89464 9.51957 9.70711 9.70711C9.51957 9.89464 9.26522 10 9 10ZM15 10H13C12.7348 10 12.4804 9.89464 12.2929 9.70711C12.1054 9.51957 12 9.26522 12 9C12 8.73478 12.1054 8.48043 12.2929 8.29289C12.4804 8.10536 12.7348 8 13 8H15C15.2652 8 15.5196 8.10536 15.7071 8.29289C15.8946 8.48043 16 8.73478 16 9C16 9.26522 15.8946 9.51957 15.7071 9.70711C15.5196 9.89464 15.2652 10 15 10ZM18 4H2V3C2 2.73478 2.10536 2.48043 2.29289 2.29289C2.48043 2.10536 2.73478 2 3 2H17C17.2652 2 17.5196 2.10536 17.7071 2.29289C17.8946 2.48043 18 2.73478 18 3V4Z\"\n                        fill=\"#505B65\" />\n                </svg>\n            </div>\n            <div *ngIf=\"canDoWalletPay\" class=\"col pay-btn\" [ngClass]=\"{'pay-btn-active' : paymentMethod == '3'}\" (click)=\"paymentSelected(3)\">\n                <input type=\"radio\" name=\"payWith\" id=\"3\"><span class=\"pay-btn-text\">{{ walletPayDesc }}</span><img class=\"icon-align\" src=\"assets/paymentType/{{walletPayLogoName}}.svg\" alt=\"\">\n            </div>\n\n        </div>\n        <lib-payment-bank-details *ngIf=\"paymentMethod == '1' && isGocardlessEnabled && postCode || portalName != 'ServiceReminderBooking'\"\n            [paymentTypeS]=\"paymentMethodType\" (payEmitter)=\"valid($event)\"\n            [paymentData]=\"genericPaymentDetails\"></lib-payment-bank-details>\n        <lib-payment-card-details\n            *ngIf=\"(portalName == 'StatementPortal' && paymentMethod == '2') || (portalName == 'AcceptProposal' && paymentMethod == '2') || (portalName == 'InvoicePortal' && paymentMethod == '2' && genericPaymentDetails.cardIntegration && (genericPaymentDetails.isBasysEnabled || genericPaymentDetails.isPayFortEnabled || genericPaymentDetails.isStripeEnabled || genericPaymentDetails.isWorldPayEnbled )  && genericPaymentDetails.cardCharges.length != 0 &&  ( !settings.cardEnable || settings.cardEnable =='Always'|| genericPaymentDetails.invoiceDetails.total + genericPaymentDetails.invoiceDetails.taxes + genericPaymentDetails.invoiceDetails.total*(tip/100) <= settings.creditDebitCard))\n            || (portalName == 'ServiceReminderBooking' && paymentMethod == '2' && genericPaymentDetails.paymentDetails.cardIntegration && (genericPaymentDetails.paymentDetails.isPayFortEnabled || genericPaymentDetails.paymentDetails.isStripeEnabled || genericPaymentDetails.paymentDetails.isWorldPayEnbled )  && genericPaymentDetails.paymentDetails.cardCharges.length != 0 &&  ( !settings.cardEnable || settings.cardEnable =='Always'|| amount <= settings.creditDebitCard))\"\n            [cardPaymentData]=\"genericPaymentDetails\" (payEmitter)=\"valid($event)\"></lib-payment-card-details>\n    </div>\n    <div class=\"(portalName == 'StatementPortal' || portalName == 'InvoicePortal') && paymentCompleted\"\n        *ngIf=\"(amountToBePaid - pendingAmount)  <= 0\">\n        <lib-payment-complete [valid]=\"paymentCompleted\"\n            [completePageDetails]=\"genericPaymentDetails\"></lib-payment-complete>\n    </div>\n</div>\n<div class=\"row pay-body error-body\" *ngIf=\"paymentMethod == 0\">\n    <span *ngIf=\"settings.cardEnable =='Always' || total <= settings.creditDebitCard\" style=\"display: none\">\n        <span\n            *ngIf=\"paymentMethod != '0' ? '':paymentSelected((genericPaymentDetails.isGocardlessEnabled && genericPaymentDetails.customerDetails.postcode)?1:(genericPaymentDetails.cardIntegration && settings.cardEnable !='No' && (settings.cardEnable =='Always'|| total <= settings.creditDebitCard))?2:0)\"></span>\n    </span>\n    <div class=\"error-title\">\n        <div class=\"logo\"><img class=\"fa-check\" src=\"assets/icon/warning.svg\" alt=\"link-invalid\"></div>\n        <div>'We`re unable to process a payment. Please contact {{clientTelephone}} for assistance'\n        </div>\n    </div>\n</div>", styles: [".pay-body{border:1px solid var(--primaryBorderColor);box-shadow:0 4px 8px #0000000a,0 0 2px #0000000f,0 0 1px #0000000a;border-radius:4px;margin:24px;overflow:hidden}.error-body{text-align:center;height:280px}.error-body .error-title{font-weight:700;font-size:14px;line-height:20px;color:#f2994a;padding-top:120px;padding-bottom:12px}.error-body .error-content{font-weight:400;font-size:12px;line-height:20px;color:var(--primaryTextColor)}.pay-title-box{background:var(--titleBarBackground);width:100%;padding:16px 24.5px}.pay-title{font-weight:700;font-size:16px;line-height:24px;color:var(--titleBarFontColor)}.pay-details{font-size:14px;line-height:20px;color:var(--titleBarSecondaryFontColour);padding-top:12px}.pay-selection{width:100%;padding:24px}.width-q{margin:0;grid-gap:24px;gap:24px}.pay-width{font-weight:700;font-size:16px;color:var(--primaryTextColor);padding-bottom:8px}.pay-btn{background:#FFFFFF;border:1px solid var(--primaryBorderColor);border-radius:4px;font-size:14px;color:var(--primaryTextColor);display:flex;align-items:center;cursor:pointer;margin-bottom:0;padding-right:18px}.pay-btn-active{border:1px solid var(--secondaryButtonColour)}.pay-btn-text{font-size:14px;color:var(--primaryTextColor);padding:8px 8px 8px 16px;width:95%}.icon-align{width:20px;height:19px}.paymentCompleted{padding:0}@media (max-width: 578px){.pay-body{margin:16px 0 0;border:none;box-shadow:none;border-radius:0}.pay-title-box{padding:22px 16px}.pay-selection{padding:16px}}@media (max-width: 784px){.pay-btn{min-width:100%;padding-right:16px;padding-left:12px}.width-q{grid-gap:12px;gap:12px}.pay-width{padding-bottom:12px}.pay-details{padding-top:8px}}\n"], components: [{ type: i2.PaymentBankDetailsComponent, selector: "lib-payment-bank-details", inputs: ["paymentData", "paymentTypeS"], outputs: ["payEmitter"] }, { type: i3.PaymentCardDetailsComponent, selector: "lib-payment-card-details", inputs: ["cardPaymentData"], outputs: ["payEmitter"] }, { type: i4.PaymentCompleteComponent, selector: "lib-payment-complete", inputs: ["valid", "cardDetails", "completePageDetails"], outputs: ["close"] }], directives: [{ type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i5.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: PaymentDetailsComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'lib-payment-details',
                    templateUrl: './payment-details.component.html',
                    styleUrls: ['./payment-details.component.scss']
                }]
        }], ctorParameters: function () { return [{ type: i1.CommonPaymentService }]; }, propDecorators: { genericPaymentDetails: [{
                type: Input
            }], tip: [{
                type: Input
            }], total: [{
                type: Input
            }], paymentSelectedOptions: [{
                type: Input
            }], emitter: [{
                type: Output
            }], payEmitter: [{
                type: Output
            }], payOptionEmitter: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF5bWVudC1kZXRhaWxzLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3BhcmVudHBheW1lbnQvc3JjL2xpYi9wYXltZW50LWRldGFpbHMvcGF5bWVudC1kZXRhaWxzLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3BhcmVudHBheW1lbnQvc3JjL2xpYi9wYXltZW50LWRldGFpbHMvcGF5bWVudC1kZXRhaWxzLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLE1BQU0sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sZUFBZSxDQUFDOzs7Ozs7O0FBVS9FLE1BQU0sT0FBTyx1QkFBdUI7SUF3Q2xDLFlBQW9CLGFBQWtDO1FBQWxDLGtCQUFhLEdBQWIsYUFBYSxDQUFxQjtRQXRDdEQsc0JBQWlCLEdBQVEsZUFBZSxDQUFDO1FBR3pDLGtCQUFhLEdBQVUsS0FBSyxDQUFDO1FBRTdCLGVBQVUsR0FBTSxZQUFZLENBQUM7UUFVcEIsVUFBSyxHQUFRLENBQUMsQ0FBQztRQUV4QixrQkFBYSxHQUFFLFFBQVEsQ0FBQztRQUN4Qix5QkFBb0IsR0FBUSxDQUFDLENBQUM7UUFDOUIsa0JBQWEsR0FBUSxDQUFDLENBQUM7UUFDdkIscUJBQWdCLEdBQVksSUFBSSxDQUFDO1FBQ2pDLG1CQUFjLEdBQVksS0FBSyxDQUFDO1FBQ2hDLHNCQUFpQixHQUFXLEVBQUUsQ0FBQztRQUMvQixrQkFBYSxHQUFXLEVBQUUsQ0FBQztRQUszQixRQUFHLEdBQVcsQ0FBQyxDQUFDO1FBQ2hCLFdBQU0sR0FBVyxDQUFDLENBQUM7UUFHVCxZQUFPLEdBQXlCLElBQUksWUFBWSxFQUFVLENBQUM7UUFDM0QsZUFBVSxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO1FBQ3hELHFCQUFnQixHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO0lBSWQsQ0FBQztJQTdCM0QsS0FBSyxDQUFDLGFBQWtCO1FBQ3RCLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDO1FBQ25DLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUE0QkQsUUFBUTs7UUFDTixJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFPLEVBQUMsRUFBRTtZQUMvQyxJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsYUFBSCxHQUFHLHVCQUFILEdBQUcsQ0FBRSxNQUFNLENBQUM7UUFDaEMsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxRQUFZLEVBQUMsRUFBRTtZQUMzRCxJQUFJLENBQUMscUJBQXFCLEdBQUcsUUFBUSxDQUFDO1FBQ3hDLENBQUMsQ0FBQyxDQUFBO1FBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsRUFBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUNsRSxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDMUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUM7UUFDbkQsSUFBRyxDQUFBLE1BQUEsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLDBDQUFFLE1BQU0sS0FBSSxlQUFlLEVBQUM7WUFDdEQsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsY0FBYyxDQUFDLGNBQWMsQ0FBQztZQUMvRSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFBO1lBQzVFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDNUcsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsbUJBQW1CLElBQUksSUFBSSxDQUFDLHFCQUFxQixDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQSxDQUFDLENBQUEsQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsZUFBZSxJQUFJLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxXQUFXLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsY0FBYyxJQUFJLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxnQkFBZ0IsSUFBSSxJQUFJLENBQUMscUJBQXFCLENBQUMsZUFBZSxJQUFJLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxnQkFBZ0IsQ0FBRSxJQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsSUFBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsSUFBRyxRQUFRLElBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyxLQUFLLEdBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsV0FBVyxDQUFDLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyxLQUFLLEdBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFDLEdBQUcsQ0FBQyxDQUFD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QUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDcEM7U0FDRjtJQUNILENBQUM7SUFFRCxlQUFlLENBQUMsS0FBVTtRQUN4QixJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsYUFBYSxJQUFJLEtBQUssQ0FBQTtRQUN0QyxJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUU7WUFDWCxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQztZQUMzQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN6QixJQUFJLEtBQUssR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBcUIsQ0FBQTtZQUM5RCxJQUFJLEtBQUssRUFBRTtnQkFDUCxLQUFLLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQzthQUN4QjtZQUNELElBQUksSUFBSSxFQUFFO2dCQUNOLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQzlCO1NBQ0o7SUFDTCxDQUFDOztxSEE5S1ksdUJBQXVCO3lHQUF2Qix1QkFBdUIsc1NDVnBDLDBwT0F3RU07NEZEOURPLHVCQUF1QjtrQkFMbkMsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUscUJBQXFCO29CQUMvQixXQUFXLEVBQUUsa0NBQWtDO29CQUMvQyxTQUFTLEVBQUUsQ0FBQyxrQ0FBa0MsQ0FBQztpQkFDaEQ7MkdBZ0JVLHFCQUFxQjtzQkFBN0IsS0FBSztnQkFDRyxHQUFHO3NCQUFYLEtBQUs7Z0JBQ0csS0FBSztzQkFBYixLQUFLO2dCQUNHLHNCQUFzQjtzQkFBOUIsS0FBSztnQkFnQkksT0FBTztzQkFBaEIsTUFBTTtnQkFDRyxVQUFVO3NCQUFuQixNQUFNO2dCQUNHLGdCQUFnQjtzQkFBekIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vblBheW1lbnRTZXJ2aWNlIH0gZnJvbSAnLi4vc2VyaXZjZXMvY29tbW9uLXBheW1lbnQuc2VydmljZSc7XG5cbmRlY2xhcmUgdmFyIHdpbmRvdyA6YW55O1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdsaWItcGF5bWVudC1kZXRhaWxzJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3BheW1lbnQtZGV0YWlscy5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3BheW1lbnQtZGV0YWlscy5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIFBheW1lbnREZXRhaWxzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBwYXltZW50TWV0aG9kVHlwZTogYW55ID0gJ0JhbmsgdHJhbnNmZXInO1xuICBwYXltZW50RW5hYmxlOiBhbnk7XG4gIHNldHRpbmdzOiBhbnk7XG4gIGRldmljZVBheW1lbnQ6IGJvb2xlYW49ZmFsc2U7XG4gIGNsaWVudFRlbGVwaG9uZTogYW55O1xuICB0ZXN0UmVzdWx0OiBhbnk9XCJ0ZXN0UmVzdWx0XCI7XG4gIHBvc3RDb2RlOiBhbnk7XG4gIGlzR29jYXJkbGVzc0VuYWJsZWQ6IGFueTtcbiAgcGF5bWVudE9wdGlvbjogYW55O1xuICB2YWxpZChwYXltZW50RW5hYmxlOiBhbnkpIHtcbiAgICB0aGlzLnBheW1lbnRFbmFibGUgPSBwYXltZW50RW5hYmxlO1xuICAgIHRoaXMucGF5RW1pdHRlci5lbWl0KHBheW1lbnRFbmFibGUpO1xuICB9XG4gIEBJbnB1dCgpIGdlbmVyaWNQYXltZW50RGV0YWlsczphbnk7XG4gIEBJbnB1dCgpIHRpcDogYW55O1xuICBASW5wdXQoKSB0b3RhbDpudW1iZXI9MDtcbiAgQElucHV0KCkgcGF5bWVudFNlbGVjdGVkT3B0aW9uczphbnk7XG4gIHBheW1lbnRTZWxlY3QgPSdjcmVkaXQnO1xuICBwYXltZW50TWV0aG9kQWxsb3dlZDogYW55ID0gMztcbiAgcGF5bWVudE1ldGhvZDogYW55ID0gMTtcbiAgcGF5bWVudENvbXBsZXRlZDogYm9vbGVhbiA9IHRydWU7XG4gIGNhbkRvV2FsbGV0UGF5OiBib29sZWFuID0gZmFsc2U7XG4gIHdhbGxldFBheUxvZ29OYW1lOiBzdHJpbmcgPSAnJztcbiAgd2FsbGV0UGF5RGVzYzogc3RyaW5nID0gJyc7XG4gIHdhbGxldERldGFpbHM6IGFueTtcbiAgYW1vdW50VG9CZVBhaWQ6YW55O1xuICBwZW5kaW5nQW1vdW50OmFueTtcbiAgcG9ydGFsTmFtZTphbnk7XG4gIHRheDogbnVtYmVyID0gMDtcbiAgYW1vdW50OiBudW1iZXIgPSAwO1xuICBcblxuICBAT3V0cHV0KCkgZW1pdHRlcjogRXZlbnRFbWl0dGVyPHN0cmluZz4gPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcbiAgQE91dHB1dCgpIHBheUVtaXR0ZXI6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoKSBwYXlPcHRpb25FbWl0dGVyOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG5cblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbW1vblNlcnZpY2U6Q29tbW9uUGF5bWVudFNlcnZpY2UpIHsgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMuY29tbW9uU2VydmljZS51c2VyVXJsJC5zdWJzY3JpYmUoKHJlczphbnkpPT57XG4gICAgICB0aGlzLnBvcnRhbE5hbWUgPSByZXM/LnBvcnRhbDtcbiAgICB9KTtcbiAgICB0aGlzLmNvbW1vblNlcnZpY2UucGF5bWVudERldGFpbHMkLnN1YnNjcmliZSgocmVzcG9uc2U6YW55KT0+e1xuICAgICAgdGhpcy5nZW5lcmljUGF5bWVudERldGFpbHMgPSByZXNwb25zZTtcbiAgICB9KVxuICAgIGNvbnNvbGUubG9nKCdwYXltZW50U2VsZWN0ZWRPcHRpb25zJyx0aGlzLnBheW1lbnRTZWxlY3RlZE9wdGlvbnMpO1xuICAgIGNvbnNvbGUubG9nKCdwb3J0YWxuYW1lJyx0aGlzLnBvcnRhbE5hbWUpO1xuICAgIGNvbnNvbGUubG9nKCdzdGF0ZW10bicsdGhpcy5nZW5lcmljUGF5bWVudERldGFpbHMpO1xuICAgIGlmKHRoaXMuY29tbW9uU2VydmljZS5hcGlVcmw/LnBvcnRhbCA9PSAnSW52b2ljZVBvcnRhbCcpe1xuICAgICAgdGhpcy5hbW91bnRUb0JlUGFpZCA9IHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLnBheW1lbnREZXRhaWxzLmFtb3VudFRvQmVQYWlkO1xuICAgICAgdGhpcy5wZW5kaW5nQW1vdW50ID0gdGhpcy5nZW5lcmljUGF5bWVudERldGFpbHMucGF5bWVudERldGFpbHMucGVuZGluZ0Ftb3VudFxuICAgICAgdGhpcy5wYXltZW50Q29tcGxldGVkID0gKHRoaXMuYW1vdW50VG9CZVBhaWQgLSB0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5wYXltZW50RGV0YWlscy5wZW5kaW5nQW1vdW50KSA8IDE7XG4gICAgICB0aGlzLnBheW1lbnRNZXRob2QgPSB0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5pc0dvY2FyZGxlc3NFbmFibGVkICYmIHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLmN1c3RvbWVyRGV0YWlscy5wb3N0Y29kZSA/MToodGhpcy5nZW5lcmljUGF5bWVudERldGFpbHMuY2FyZEludGVncmF0aW9uICYmIHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLmNhcmRDaGFyZ2VzICE9IC0xICYmICh0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5pc0Jhc3lzRW5hYmxlZCB8fCB0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5pc1BheUZvcnRFbmFibGVkIHx8IHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLmlzU3RyaXBlRW5hYmxlZCB8fCB0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5pc1dvcmxkUGF5RW5ibGVkICkgICAmJiAgKCF0aGlzLnNldHRpbmdzLmNhcmRFbmFibGV8fCB0aGlzLnNldHRpbmdzLmNhcmRFbmFibGUgPT0nQWx3YXlzJ3x8IHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLmludm9pY2VEZXRhaWxzLnRvdGFsICsgdGhpcy5nZW5lcmljUGF5bWVudERldGFpbHMuaW52b2ljZURldGFpbHMudGF4ZXMgKyB0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5pbnZvaWNlRGV0YWlscy50b3RhbCoodGhpcy50aXAvMTAwKSArICh0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5jYXJkQ2hhcmdlc1t0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5jYXJkQ2hhcmdlc10uY2hhcmdlIC8gMTAwKSAqICh0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5pbnZvaWNlRGV0YWlscy50b3RhbCArIHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLmludm9pY2VEZXRhaWxzLnRheGVzICsgdGhpcy5nZW5lcmljUGF5bWVudERldGFpbHMuaW52b2ljZURldGFpbHMudG90YWwqKHRoaXMudGlwLzEwMCkpIDw9IHRoaXMuc2V0dGluZ3MuY3JlZGl0RGViaXRDYXJkKSk/MjowO1xuICAgICAgdGhpcy5jbGllbnRUZWxlcGhvbmUgPSB0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5jbGllbnREZXRhaWxzLmNvdW50cnljb2RlICsgdGhpcy5nZW5lcmljUGF5bWVudERldGFpbHMuY2xpZW50RGV0YWlscy50ZWxlcGhvbmU7XG4gICAgICAvLyB0aGlzLmNhbldhbGxldFBheSgpO1xuICAgIH1lbHNlIGlmKHRoaXMuY29tbW9uU2VydmljZS5hcGlVcmw/LnBvcnRhbCA9PSAnU3RhdGVtZW50UG9ydGFsJyl7XG4gICAgICB0aGlzLnBheW1lbnRNZXRob2QgPSB0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5pc0dvY2FyZGxlc3NFbmFibGVkICYmIHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLmN1c3RvbWVyRGV0YWlscy5wb3N0Y29kZT8xOih0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5jYXJkSW50ZWdyYXRpb24gJiYgKHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLmlzU3RyaXBlRW5hYmxlZCB8fCB0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5pc1dvcmxkUGF5RW5ibGVkIHx8IHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLmlzUGF5Rm9ydCkgJiYgKHRoaXMuc2V0dGluZ3MuY2FyZEVuYWJsZSA9PSB1bmRlZmluZWQgfHwodGhpcy5zZXR0aW5ncy5jYXJkRW5hYmxlICE9J05vJyAmJiAodGhpcy5zZXR0aW5ncy5jYXJkRW5hYmxlID09J0Fsd2F5cyd8fCB0aGlzLnRvdGFsIDw9IHRoaXMuc2V0dGluZ3MuY3JlZGl0RGViaXRDYXJkKSkpKT8yOjA7XG4gICAgICB0aGlzLmNsaWVudFRlbGVwaG9uZSA9IHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLmNsaWVudF90ZWxlcGhvbmU7XG4gICAgICAvLyB0aGlzLmNhbldhbGxldFBheSgpO1xuICAgIH1cbiAgICBlbHNlIGlmKHRoaXMuY29tbW9uU2VydmljZS5hcGlVcmw/LnBvcnRhbCA9PSAnU2VydmljZVJlbWluZGVyQm9va2luZycpe1xuICAgICAgdGhpcy5zZXR0aW5ncyA9IHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLnNldHRpbmdzLnJlZHVjZSgob2JqOiBhbnksIGl0ZW06IGFueSkgPT4gT2JqZWN0LmFzc2lnbihvYmosIHsgW2l0ZW0ua2V5XTogaXRlbS52YWx1ZSB9KSwge30pO1xuICAgICAgbGV0IGpvYkRlc2NyaXB0aW9uUHJpY2luZ0l0ZW1zID0gdGhpcy5nZW5lcmljUGF5bWVudERldGFpbHMuam9iRGVzY3JpcHRpb25QcmljaW5nSXRlbXM7XG4gICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGpvYkRlc2NyaXB0aW9uUHJpY2luZ0l0ZW1zLmxlbmd0aDsgKytuKSB7XG4gICAgICAgIHRoaXMuYW1vdW50ID0gdGhpcy5hbW91bnQgKyBwYXJzZUludChqb2JEZXNjcmlwdGlvblByaWNpbmdJdGVtc1tuXS51bml0cHJpY2UpO1xuICAgICAgICB0aGlzLnRheCA9IHRoaXMudGF4ICsgcGFyc2VJbnQoam9iRGVzY3JpcHRpb25QcmljaW5nSXRlbXNbbl0udW5pdHByaWNlKSAqcGFyc2VJbnQoam9iRGVzY3JpcHRpb25QcmljaW5nSXRlbXNbMF0udGF4UmF0ZSkvMTAwO1xuICAgICAgfVxuICAgICAgdGhpcy5nZW5lcmljUGF5bWVudERldGFpbHNbJ2Ftb3VudCddID0gdGhpcy5hbW91bnQ7XG4gICAgICB0aGlzLnBheW1lbnRNZXRob2QgPSB0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5wYXltZW50RGV0YWlscy5jYXJkSW50ZWdyYXRpb24gJiYgKHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLnBheW1lbnREZXRhaWxzLmlzUGF5Rm9ydEVuYWJsZWQgfHwgdGhpcy5nZW5lcmljUGF5bWVudERldGFpbHMucGF5bWVudERldGFpbHMuaXNTdHJpcGVFbmFibGVkIHx8IHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLnBheW1lbnREZXRhaWxzLmlzV29ybGRQYXlFbmJsZWQgKSAgICYmICAoIXRoaXMuc2V0dGluZ3MuY2FyZEVuYWJsZXx8IHRoaXMuc2V0dGluZ3MuY2FyZEVuYWJsZSA9PSdBbHdheXMnfHwgdGhpcy5hbW91bnQgKyAodGhpcy5nZW5lcmljUGF5bWVudERldGFpbHMucGF5bWVudERldGFpbHMuY2FyZENoYXJnZXNbdGhpcy5jb21tb25TZXJ2aWNlLmNhcmRDaGFyZ2VzLmxlbmd0aF0uY2hhcmdlIC8gMTAwKSAqIHRoaXMuYW1vdW50IDw9IHRoaXMuc2V0dGluZ3MuY3JlZGl0RGViaXRDYXJkKT8yOjA7XG4gICAgICB0aGlzLmNsaWVudFRlbGVwaG9uZSA9IHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLmNsaWVudF90ZWxlcGhvbmU7XG4gICAgfVxuXG4gICAgdGhpcy5pc0dvY2FyZGxlc3NFbmFibGVkID0gdGhpcy5nZW5lcmljUGF5bWVudERldGFpbHMuaXNHb2NhcmRsZXNzRW5hYmxlZDtcbiAgICB0aGlzLnBvc3RDb2RlID0gdGhpcy5nZW5lcmljUGF5bWVudERldGFpbHM/LmN1c3RvbWVyRGV0YWlscz8ucG9zdGNvZGUgPyB0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscz8uY3VzdG9tZXJEZXRhaWxzLnBvc3Rjb2RlIDogdGhpcy5nZW5lcmljUGF5bWVudERldGFpbHNbJ3Bvc3Rjb2RlJ107XG4gICAgdGhpcy5jb21tb25TZXJ2aWNlLnNldFVzZXJSZXNwb25zZSh0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscywnJyk7XG4gICAgXG4gICAgaWYoXCJzZXR0aW5nc1wiIGluIHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzKXtcbiAgICAgIHRoaXMuc2V0dGluZ3MgPSB0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5zZXR0aW5ncy5yZWR1Y2UoKG9iajogYW55LCBpdGVtOiBhbnkpID0+IE9iamVjdC5hc3NpZ24ob2JqLCB7IFtpdGVtLmtleV06IGl0ZW0udmFsdWUgfSksIHt9KTtcbiAgICAgIHRoaXMucGF5bWVudE1ldGhvZFR5cGUgPSB0aGlzLnNldHRpbmdzLmNvdW50cnlSZWdpb249PSA2ID8gJ0FDSCcgOiAnQmFuayB0cmFuc2Zlcic7XG4gICAgfWVsc2V7XG4gICAgICB0aGlzLnBheW1lbnRNZXRob2RUeXBlID0gdGhpcy5nZW5lcmljUGF5bWVudERldGFpbHMuY291bnRyeVJlZ2lvbiA9PSA2ID8gJ0FDSCcgOiAnQmFuayB0cmFuc2Zlcic7XG4gICAgfVxuICAgIFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5wYXltZW50U2VsZWN0ZWQodGhpcy5wYXltZW50TWV0aG9kKVxuICAgIH0sIDEwMCk7XG4gICAgdGhpcy5lbWl0dGVyLmVtaXQodGhpcy5wYXltZW50TWV0aG9kVHlwZSk7XG4gICAgXG4gICAgXG4gIH1cblxuXG4gIGNhbldhbGxldFBheSgpIHtcbiAgICB0aGlzLmNhbkRvV2FsbGV0UGF5ID0gZmFsc2U7XG4gICAgdGhpcy5nZW5lcmljUGF5bWVudERldGFpbHMuaXNXYWxsZXRQYXlFbmFibGVkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5nZW5lcmljUGF5bWVudERldGFpbHMuaXNTdHJpcGVFbmFibGVkICYmIHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLmlzV2FsbGV0UGF5RW5hYmxlZCkge1xuICAgICAgICBsZXQgYW1vdW50VG9CZVBhaWQgPSB0aGlzLmNvbW1vblNlcnZpY2Uucm91bmRBbW91bnQocGFyc2VGbG9hdCh0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5wYXltZW50RGV0YWlscy5hbW91bnRUb0JlUGFpZCkpO1xuICAgICAgICBsZXQgc3RyaXBlV2FsbGV0UGF5Q2hhcmdlcyA9IDA7XG4gICAgICAgIGxldCBjaGFyZ2VQY3QgPSBwYXJzZUZsb2F0KHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLldhbGxldFBheVBheW1lbnRDaGFyZ2VzKTtcbiAgICAgICAgaWYgKGNoYXJnZVBjdCA+IDApIHtcbiAgICAgICAgICAgIHN0cmlwZVdhbGxldFBheUNoYXJnZXMgPSB0aGlzLmNvbW1vblNlcnZpY2Uucm91bmRBbW91bnQoKGNoYXJnZVBjdCAvIDEwMCkgKiBhbW91bnRUb0JlUGFpZCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRvdGFsVG9CZVBhaWQgPSB0aGlzLmNvbW1vblNlcnZpY2Uucm91bmRBbW91bnQoYW1vdW50VG9CZVBhaWQgKyBzdHJpcGVXYWxsZXRQYXlDaGFyZ2VzKTtcbiAgICAgICAgaWYodGhpcy5zZXR0aW5ncy5jYXJkRW5hYmxlID09ICdFbmFibGVXaGVuQW1vdW50QXQnICYmIHRvdGFsVG9CZVBhaWQgPiB0aGlzLnNldHRpbmdzLmNyZWRpdERlYml0Q2FyZCl7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy9odHRwczovL3N0cmlwZS5jb20vZG9jcy9qcy9pbml0aWFsaXppbmdcbiAgICAgICAgY29uc3Qgc3RyaXBlID0gd2luZG93LlN0cmlwZShhdG9iKHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLnBrX3Rva2VuKSwge3N0cmlwZUFjY291bnQ6IHRoaXMuZ2VuZXJpY1BheW1lbnREZXRhaWxzLnN0cmlwZUNvbm5lY3RlZEFjY291bnRJZH0pO1xuICAgICAgICBjb25zdCBwYXltZW50UmVxdWVzdCA9IHN0cmlwZS5wYXltZW50UmVxdWVzdCh7XG4gICAgICAgICAgICBjb3VudHJ5OiB0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5jbGllbnREZXRhaWxzLmNvdW50cnlOYW1lQ29kZSxcbiAgICAgICAgICAgIGN1cnJlbmN5OiB0aGlzLmdlbmVyaWNQYXltZW50RGV0YWlscy5jdXJyZW5jeUNvZGUudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgIHRvdGFsOiB7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdEZW1vIHRvdGFsJyxcbiAgICAgICAgICAgICAgICBhbW91bnQ6IDEsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVxdWVzdFBheWVyTmFtZTogdHJ1ZSxcbiAgICAgICAgICAgIHJlcXVlc3RQYXllckVtYWlsOiB0cnVlLFxuICAgICAgICB9KTtcblxuICAgICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIGF2YWlsYWJpbGl0eSBvZiB0aGUgUGF5bWVudCBSZXF1ZXN0IEFQSSBmaXJzdC5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBheW1lbnRSZXF1ZXN0LmNhbk1ha2VQYXltZW50KCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2FuTWFrZVBheW1lbnQnLCByZXN1bHQpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FuRG9XYWxsZXRQYXkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuYXBwbGVQYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53YWxsZXRQYXlEZXNjID0gJ0FwcGxlIFBheSc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2FsbGV0UGF5TG9nb05hbWUgPSAnQXBwbGVQYXknO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0Lmdvb2dsZVBheSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndhbGxldFBheURlc2MgPSAnR29vZ2xlIFBheSc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2FsbGV0UGF5TG9nb05hbWUgPSAnR29vZ2xlUGF5JztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5saW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2FsbGV0UGF5RGVzYyA9ICdQYXkgdmlhIExpbmsnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndhbGxldFBheUxvZ29OYW1lID0gJ0xpbmtQYXknO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2FsbGV0UGF5RGVzYyA9ICdXYWxsZXRQYXknO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndhbGxldFBheUxvZ29OYW1lID0gJ1dhbGxldCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuIG1ha2UgV2FsbGV0IHBheW1lbnRzLlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5ub3QgbWFrZSBXYWxsZXQgcGF5bWVudHMuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSgpO1xuICAgIH1cbn1cblxuICBjaGFuZ2VQYXltZW50T3B0aW9uKG9wdGlvbiA6IHN0cmluZyxzZWxlY3RlZDphbnkpe1xuICAgIHRoaXMucGF5bWVudE9wdGlvbiA9IG9wdGlvbjtcbiAgICBpZiAoc2VsZWN0ZWQgPT0gdHJ1ZSl7XG4gICAgICBpZih0aGlzLnBheW1lbnRPcHRpb24gPT0gJ2RlYml0Jyl7XG4gICAgICAgIHRoaXMucGF5T3B0aW9uRW1pdHRlci5lbWl0KG9wdGlvbik7XG4gICAgICB9ZWxzZSBpZih0aGlzLnBheW1lbnRPcHRpb24gPT0gJ2NyZWRpdCcpeyBcbiAgICAgICAgdGhpcy5wYXlPcHRpb25FbWl0dGVyLmVtaXQob3B0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwYXltZW50U2VsZWN0ZWQodmFsdWU6IGFueSkge1xuICAgIHZhciB0ZW1wID0gdGhpcy5wYXltZW50TWV0aG9kICE9IHZhbHVlXG4gICAgaWYgKHZhbHVlID4gMCkge1xuICAgICAgICB0aGlzLnBheW1lbnRNZXRob2QgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5lbWl0dGVyLmVtaXQodmFsdWUpO1xuICAgICAgICB2YXIgY2hlY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh2YWx1ZSkgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgICBpZiAoY2hlY2spIHtcbiAgICAgICAgICAgIGNoZWNrLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ZW1wKSB7XG4gICAgICAgICAgICB0aGlzLnBheUVtaXR0ZXIuZW1pdCh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxufVxuIiwiPGRpdiBjbGFzcz1cInJvdyBwYXktYm9keVwiPlxuICAgIDxkaXYgY2xhc3M9XCJwYXktdGl0bGUtYm94XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwYXktdGl0bGVcIj5QYXltZW50IGRldGFpbHM8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInBheS1kZXRhaWxzXCI+XG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICpuZ0lmPVwicG9ydGFsTmFtZSA9PSAnSW52b2ljZVBvcnRhbCcgJiYgKGFtb3VudFRvQmVQYWlkIC0gKHBlbmRpbmdBbW91bnQgPyBwZW5kaW5nQW1vdW50IDogMCkpID4wXCI+UGxlYXNlXG4gICAgICAgICAgICAgICAgZmlsbCB0aGUgaW5mb3JtYXRpb24gYmVsb3cgYWJvdXQgeW91ciBwYXltZW50IG1ldGhvZDwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwicG9ydGFsTmFtZSA9PSAnU3RhdGVtZW50UG9ydGFsJyB8fCBwb3J0YWxOYW1lID09ICdBY2NlcHRQcm9wb3NhbCcgfHwgcG9ydGFsTmFtZSA9PSAnU2VydmljZVJlbWluZGVyQm9va2luZydcIj5QbGVhc2UgZmlsbCB0aGUgaW5mb3JtYXRpb25cbiAgICAgICAgICAgICAgICBiZWxvdyBhYm91dCB5b3VyIHBheW1lbnQgbWV0aG9kPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInBheS1kZXRhaWxzXCJcbiAgICAgICAgICAgICpuZ0lmPVwicG9ydGFsTmFtZSA9PSAnSW52b2ljZVBvcnRhbCcgJiYgKGFtb3VudFRvQmVQYWlkIC0gKHBlbmRpbmdBbW91bnQgPyBwZW5kaW5nQW1vdW50IDogMCkpIDw9IDBcIj5cbiAgICAgICAgICAgIFBheW1lbnQgc3RhdHVzIGFuZCBzdW1tYXJ5IGluZm9ybWF0aW9uPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cInBheS1zZWxlY3Rpb25cIlxuICAgICAgICAqbmdJZj1cIihhbW91bnRUb0JlUGFpZCAtIHBlbmRpbmdBbW91bnQpID4wIHx8IHBvcnRhbE5hbWUgPT0gJ1N0YXRlbWVudFBvcnRhbCcgfHwgcG9ydGFsTmFtZSA9PSAnQWNjZXB0UHJvcG9zYWwnIHx8IHBvcnRhbE5hbWUgPT0gJ1NlcnZpY2VSZW1pbmRlckJvb2tpbmcnIFwiPlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2wgcGF5LXdpZHRoXCI+UGF5IHdpdGg8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJvdyB3aWR0aC1xXCI+XG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiaXNHb2NhcmRsZXNzRW5hYmxlZCAmJiBwb3N0Q29kZSB8fCBwb3J0YWxOYW1lICE9ICdTZXJ2aWNlUmVtaW5kZXJCb29raW5nJ1wiIGNsYXNzPVwiY29sIHBheS1idG5cIiAoY2xpY2spPVwicGF5bWVudFNlbGVjdGVkKDEpXCJcbiAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7J3BheS1idG4tYWN0aXZlJyA6IHBheW1lbnRNZXRob2QgPT0gJzEnfVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJwb3J0YWxOYW1lID09ICdBY2NlcHRQcm9wb3NhbCdcIj48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cInBheVdpdGhcIiBpZD1cIjFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKGNsaWNrKT1cImNoYW5nZVBheW1lbnRPcHRpb24oJ2RlYml0Jyx0cnVlKVwiIFtjaGVja2VkXT1cInBheW1lbnRTZWxlY3Q9PSdkZWJpdCdcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwicG9ydGFsTmFtZSAhPSAnQWNjZXB0UHJvcG9zYWwnXCI+PGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJwYXlXaXRoXCIgaWQ9XCIxXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwYXktYnRuLXRleHRcIj57e3BheW1lbnRNZXRob2RUeXBlIH19PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjE2XCIgdmlld0JveD1cIjAgMCAyMCAxNlwiIGZpbGw9XCJub25lXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuICAgICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgZD1cIk0xMyAxMFY3SDE2VjVMMjAgOC41TDE2IDEyVjEwSDEzWk0xMiAzLjdWNUgwVjMuN0w2IDBMMTIgMy43Wk01IDZIN1YxMUg1VjZaTTEgNkgzVjExSDFWNlpNMTEgNlY4LjVMOSAxMC4zVjZIMTFaTTcuMSAxMkw2LjUgMTIuNUw4LjIgMTRIMFYxMkg3LjFaTTE1IDExVjE0SDEyVjE2TDggMTIuNUwxMiA5VjExSDE1WlwiXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwiIzUwNUI2NVwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbCBwYXktYnRuXCIgKGNsaWNrKT1cInBheW1lbnRTZWxlY3RlZCgyKVwiIFtuZ0NsYXNzXT1cInsncGF5LWJ0bi1hY3RpdmUnIDogcGF5bWVudE1ldGhvZCA9PSAnMid9XCI+XG4gICAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cInBvcnRhbE5hbWUgPT0gJ0FjY2VwdFByb3Bvc2FsJ1wiPjxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwicGF5V2l0aFwiIGlkPVwiMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwiY2hhbmdlUGF5bWVudE9wdGlvbignY3JlZGl0Jyx0cnVlKVwiIFtjaGVja2VkXT1cInBheW1lbnRTZWxlY3Q9PSdjcmVkaXQnXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cInBvcnRhbE5hbWUgIT0gJ0FjY2VwdFByb3Bvc2FsJ1wiPjxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwicGF5V2l0aFwiIGlkPVwiMVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicGF5LWJ0bi10ZXh0XCI+RGViaXQgb3IgY3JlZGl0IGNhcmQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMTRcIiB2aWV3Qm94PVwiMCAwIDIwIDE0XCIgZmlsbD1cIm5vbmVcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICBkPVwiTTE3IDBIM0MyLjIwNDM1IDAgMS40NDEyOSAwLjMxNjA3MSAwLjg3ODY4IDAuODc4NjhDMC4zMTYwNzEgMS40NDEyOSAwIDIuMjA0MzUgMCAzVjExQzAgMTEuNzk1NiAwLjMxNjA3MSAxMi41NTg3IDAuODc4NjggMTMuMTIxM0MxLjQ0MTI5IDEzLjY4MzkgMi4yMDQzNSAxNCAzIDE0SDE3QzE3Ljc5NTYgMTQgMTguNTU4NyAxMy42ODM5IDE5LjEyMTMgMTMuMTIxM0MxOS42ODM5IDEyLjU1ODcgMjAgMTEuNzk1NiAyMCAxMVYzQzIwIDIuMjA0MzUgMTkuNjgzOSAxLjQ0MTI5IDE5LjEyMTMgMC44Nzg2OEMxOC41NTg3IDAuMzE2MDcxIDE3Ljc5NTYgMCAxNyAwWk05IDEwSDVDNC43MzQ3OCAxMCA0LjQ4MDQzIDkuODk0NjQgNC4yOTI4OSA5LjcwNzExQzQuMTA1MzYgOS41MTk1NyA0IDkuMjY1MjIgNCA5QzQgOC43MzQ3OCA0LjEwNTM2IDguNDgwNDMgNC4yOTI4OSA4LjI5Mjg5QzQuNDgwNDMgOC4xMDUzNiA0LjczNDc4IDggNSA4SDlDOS4yNjUyMiA4IDkuNTE5NTcgOC4xMDUzNiA5LjcwNzExIDguMjkyODlDOS44OTQ2NCA4LjQ4MDQzIDEwIDguNzM0NzggMTAgOUMxMCA5LjI2NTIyIDkuODk0NjQgOS41MTk1NyA5LjcwNzExIDkuNzA3MTFDOS41MTk1NyA5Ljg5NDY0IDkuMjY1MjIgMTAgOSAxMFpNMTUgMTBIMTNDMTIuNzM0OCAxMCAxMi40ODA0IDkuODk0NjQgMTIuMjkyOSA5LjcwNzExQzEyLjEwNTQgOS41MTk1NyAxMiA5LjI2NTIyIDEyIDlDMTIgOC43MzQ3OCAxMi4xMDU0IDguNDgwNDMgMTIuMjkyOSA4LjI5Mjg5QzEyLjQ4MDQgOC4xMDUzNiAxMi43MzQ4IDggMTMgOEgxNUMxNS4yNjUyIDggMTUuNTE5NiA4LjEwNTM2IDE1LjcwNzEgOC4yOTI4OUMxNS44OTQ2IDguNDgwNDMgMTYgOC43MzQ3OCAxNiA5QzE2IDkuMjY1MjIgMTUuODk0NiA5LjUxOTU3IDE1LjcwNzEgOS43MDcxMUMxNS41MTk2IDkuODk0NjQgMTUuMjY1MiAxMCAxNSAxMFpNMTggNEgyVjNDMiAyLjczNDc4IDIuMTA1MzYgMi40ODA0MyAyLjI5Mjg5IDIuMjkyODlDMi40ODA0MyAyLjEwNTM2IDIuNzM0NzggMiAzIDJIMTdDMTcuMjY1MiAyIDE3LjUxOTYgMi4xMDUzNiAxNy43MDcxIDIuMjkyODlDMTcuODk0NiAyLjQ4MDQzIDE4IDIuNzM0NzggMTggM1Y0WlwiXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwiIzUwNUI2NVwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJjYW5Eb1dhbGxldFBheVwiIGNsYXNzPVwiY29sIHBheS1idG5cIiBbbmdDbGFzc109XCJ7J3BheS1idG4tYWN0aXZlJyA6IHBheW1lbnRNZXRob2QgPT0gJzMnfVwiIChjbGljayk9XCJwYXltZW50U2VsZWN0ZWQoMylcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cInBheVdpdGhcIiBpZD1cIjNcIj48c3BhbiBjbGFzcz1cInBheS1idG4tdGV4dFwiPnt7IHdhbGxldFBheURlc2MgfX08L3NwYW4+PGltZyBjbGFzcz1cImljb24tYWxpZ25cIiBzcmM9XCJhc3NldHMvcGF5bWVudFR5cGUve3t3YWxsZXRQYXlMb2dvTmFtZX19LnN2Z1wiIGFsdD1cIlwiPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxsaWItcGF5bWVudC1iYW5rLWRldGFpbHMgKm5nSWY9XCJwYXltZW50TWV0aG9kID09ICcxJyAmJiBpc0dvY2FyZGxlc3NFbmFibGVkICYmIHBvc3RDb2RlIHx8IHBvcnRhbE5hbWUgIT0gJ1NlcnZpY2VSZW1pbmRlckJvb2tpbmcnXCJcbiAgICAgICAgICAgIFtwYXltZW50VHlwZVNdPVwicGF5bWVudE1ldGhvZFR5cGVcIiAocGF5RW1pdHRlcik9XCJ2YWxpZCgkZXZlbnQpXCJcbiAgICAgICAgICAgIFtwYXltZW50RGF0YV09XCJnZW5lcmljUGF5bWVudERldGFpbHNcIj48L2xpYi1wYXltZW50LWJhbmstZGV0YWlscz5cbiAgICAgICAgPGxpYi1wYXltZW50LWNhcmQtZGV0YWlsc1xuICAgICAgICAgICAgKm5nSWY9XCIocG9ydGFsTmFtZSA9PSAnU3RhdGVtZW50UG9ydGFsJyAmJiBwYXltZW50TWV0aG9kID09ICcyJykgfHwgKHBvcnRhbE5hbWUgPT0gJ0FjY2VwdFByb3Bvc2FsJyAmJiBwYXltZW50TWV0aG9kID09ICcyJykgfHwgKHBvcnRhbE5hbWUgPT0gJ0ludm9pY2VQb3J0YWwnICYmIHBheW1lbnRNZXRob2QgPT0gJzInICYmIGdlbmVyaWNQYXltZW50RGV0YWlscy5jYXJkSW50ZWdyYXRpb24gJiYgKGdlbmVyaWNQYXltZW50RGV0YWlscy5pc0Jhc3lzRW5hYmxlZCB8fCBnZW5lcmljUGF5bWVudERldGFpbHMuaXNQYXlGb3J0RW5hYmxlZCB8fCBnZW5lcmljUGF5bWVudERldGFpbHMuaXNTdHJpcGVFbmFibGVkIHx8IGdlbmVyaWNQYXltZW50RGV0YWlscy5pc1dvcmxkUGF5RW5ibGVkICkgICYmIGdlbmVyaWNQYXltZW50RGV0YWlscy5jYXJkQ2hhcmdlcy5sZW5ndGggIT0gMCAmJiAgKCAhc2V0dGluZ3MuY2FyZEVuYWJsZSB8fCBzZXR0aW5ncy5jYXJkRW5hYmxlID09J0Fsd2F5cyd8fCBnZW5lcmljUGF5bWVudERldGFpbHMuaW52b2ljZURldGFpbHMudG90YWwgKyBnZW5lcmljUGF5bWVudERldGFpbHMuaW52b2ljZURldGFpbHMudGF4ZXMgKyBnZW5lcmljUGF5bWVudERldGFpbHMuaW52b2ljZURldGFpbHMudG90YWwqKHRpcC8xMDApIDw9IHNldHRpbmdzLmNyZWRpdERlYml0Q2FyZCkpXG4gICAgICAgICAgICB8fCAocG9ydGFsTmFtZSA9PSAnU2VydmljZVJlbWluZGVyQm9va2luZycgJiYgcGF5bWVudE1ldGhvZCA9PSAnMicgJiYgZ2VuZXJpY1BheW1lbnREZXRhaWxzLnBheW1lbnREZXRhaWxzLmNhcmRJbnRlZ3JhdGlvbiAmJiAoZ2VuZXJpY1BheW1lbnREZXRhaWxzLnBheW1lbnREZXRhaWxzLmlzUGF5Rm9ydEVuYWJsZWQgfHwgZ2VuZXJpY1BheW1lbnREZXRhaWxzLnBheW1lbnREZXRhaWxzLmlzU3RyaXBlRW5hYmxlZCB8fCBnZW5lcmljUGF5bWVudERldGFpbHMucGF5bWVudERldGFpbHMuaXNXb3JsZFBheUVuYmxlZCApICAmJiBnZW5lcmljUGF5bWVudERldGFpbHMucGF5bWVudERldGFpbHMuY2FyZENoYXJnZXMubGVuZ3RoICE9IDAgJiYgICggIXNldHRpbmdzLmNhcmRFbmFibGUgfHwgc2V0dGluZ3MuY2FyZEVuYWJsZSA9PSdBbHdheXMnfHwgYW1vdW50IDw9IHNldHRpbmdzLmNyZWRpdERlYml0Q2FyZCkpXCJcbiAgICAgICAgICAgIFtjYXJkUGF5bWVudERhdGFdPVwiZ2VuZXJpY1BheW1lbnREZXRhaWxzXCIgKHBheUVtaXR0ZXIpPVwidmFsaWQoJGV2ZW50KVwiPjwvbGliLXBheW1lbnQtY2FyZC1kZXRhaWxzPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCIocG9ydGFsTmFtZSA9PSAnU3RhdGVtZW50UG9ydGFsJyB8fCBwb3J0YWxOYW1lID09ICdJbnZvaWNlUG9ydGFsJykgJiYgcGF5bWVudENvbXBsZXRlZFwiXG4gICAgICAgICpuZ0lmPVwiKGFtb3VudFRvQmVQYWlkIC0gcGVuZGluZ0Ftb3VudCkgIDw9IDBcIj5cbiAgICAgICAgPGxpYi1wYXltZW50LWNvbXBsZXRlIFt2YWxpZF09XCJwYXltZW50Q29tcGxldGVkXCJcbiAgICAgICAgICAgIFtjb21wbGV0ZVBhZ2VEZXRhaWxzXT1cImdlbmVyaWNQYXltZW50RGV0YWlsc1wiPjwvbGliLXBheW1lbnQtY29tcGxldGU+XG4gICAgPC9kaXY+XG48L2Rpdj5cbjxkaXYgY2xhc3M9XCJyb3cgcGF5LWJvZHkgZXJyb3ItYm9keVwiICpuZ0lmPVwicGF5bWVudE1ldGhvZCA9PSAwXCI+XG4gICAgPHNwYW4gKm5nSWY9XCJzZXR0aW5ncy5jYXJkRW5hYmxlID09J0Fsd2F5cycgfHwgdG90YWwgPD0gc2V0dGluZ3MuY3JlZGl0RGViaXRDYXJkXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lXCI+XG4gICAgICAgIDxzcGFuXG4gICAgICAgICAgICAqbmdJZj1cInBheW1lbnRNZXRob2QgIT0gJzAnID8gJyc6cGF5bWVudFNlbGVjdGVkKChnZW5lcmljUGF5bWVudERldGFpbHMuaXNHb2NhcmRsZXNzRW5hYmxlZCAmJiBnZW5lcmljUGF5bWVudERldGFpbHMuY3VzdG9tZXJEZXRhaWxzLnBvc3Rjb2RlKT8xOihnZW5lcmljUGF5bWVudERldGFpbHMuY2FyZEludGVncmF0aW9uICYmIHNldHRpbmdzLmNhcmRFbmFibGUgIT0nTm8nICYmIChzZXR0aW5ncy5jYXJkRW5hYmxlID09J0Fsd2F5cyd8fCB0b3RhbCA8PSBzZXR0aW5ncy5jcmVkaXREZWJpdENhcmQpKT8yOjApXCI+PC9zcGFuPlxuICAgIDwvc3Bhbj5cbiAgICA8ZGl2IGNsYXNzPVwiZXJyb3ItdGl0bGVcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImxvZ29cIj48aW1nIGNsYXNzPVwiZmEtY2hlY2tcIiBzcmM9XCJhc3NldHMvaWNvbi93YXJuaW5nLnN2Z1wiIGFsdD1cImxpbmstaW52YWxpZFwiPjwvZGl2PlxuICAgICAgICA8ZGl2PidXZWByZSB1bmFibGUgdG8gcHJvY2VzcyBhIHBheW1lbnQuIFBsZWFzZSBjb250YWN0IHt7Y2xpZW50VGVsZXBob25lfX0gZm9yIGFzc2lzdGFuY2UnXG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuPC9kaXY+Il19
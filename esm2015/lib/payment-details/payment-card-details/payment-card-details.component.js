import { Component, Input, Output, EventEmitter } from '@angular/core';
import { Validators } from '@angular/forms';
import { CreditCardValidators } from 'angular-cc-library';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "@angular/common";
import * as i3 from "ngx-card";
export class PaymentCardDetailsComponent {
    constructor(fb) {
        this.fb = fb;
        this.payEmitter = new EventEmitter();
        this.storedCards = [];
        this.cardType = '';
        this.card = false;
        this.cardwidth = 350;
        this.messages = { validDate: 'valid\ndate', monthYear: 'mm/yy' }; //Strings for translation
        this.placeholders = { number: '•••• •••• •••• ••••', name: 'Full Name', expiry: '••/••', cvc: '•••' }; // Placeholders for rendered fields
        this.formatting = true;
        this.debug = true; // If true, will log helpful messages for setting up Card
        this.companyNameSelected = false;
        this.isCardNumberLength = true;
        this.cardLogo = '';
        this.cardImg = "";
    }
    ngOnInit() {
        this.payEmitter.emit(true);
    }
    dropdown(val) {
        this.cardType = false;
        this.payEmitter.emit(false);
        if (val == 'Set up new debit or credit card') {
            this.card = false;
            this.buildCreditForms();
        }
        // this.translate.get("Use existing credit card").subscribe(translations => {
        //   if(val.value== translations){
        //     this.card=true
        //     if(this.storedCards.length == 1){
        //       this.cardSelected(this.storedCards[0].id,'ts')
        //     }
        //   }
        //   else{
        //     this.card=false
        //     this.buildCreditForms()
        //   }
        // })
    }
    buildCreditForms() {
        let date = new Date().toISOString().slice(0, 10);
        this.creditForm = this.fb.group({
            payment: this.fb.group({
                'amount': [,],
                'cardCharge': [this.cardPaymentData.cardCharges['']],
                'cardName': [this.cardPaymentData.customerDetails.customerName, [Validators.required]],
                'cardNumber': ['', [Validators.required, CreditCardValidators.validateCCNumber]],
                'cardCvc': ['', [Validators.required, Validators.minLength(3), Validators.maxLength(4)]],
                'paymentDate': [date],
                'description': ["Invoice no : " + this.cardPaymentData.invoiceDetails.invoiceNumber],
                'isportal': [true],
                'reference': ['Invoice no : ' + this.cardPaymentData.invoiceDetails.invoiceNumber,],
                'email': [this.cardPaymentData.customerDetails.emailId, [Validators.required, Validators.email]],
                'expiry': ['', [Validators.required, CreditCardValidators.validateExpDate]],
                "paymentMethod": [this.cardPaymentData.cardCharges['']],
                "dontSendToAccounts": [''],
            })
        });
        this.placeholders = { name: this.cardPaymentData.customerDetails.customerName ? this.cardPaymentData.customerDetails.customerName : 'Full Name' };
    }
    companyNameClick() {
        this.companyNameSelected = !this.companyNameSelected;
        this.creditForm.patchValue({ 'payment': { 'cardName': '' } });
    }
    keypress() {
        this.payEmitter.emit(this.creditForm);
    }
    setCardType() {
        this.cardLogo = this.detectCardType(this.creditForm.value.payment.cardNumber.replace(/\s/g, ""));
        var cardStatus = this.creditForm.get('payment.cardNumber');
        if (this.isCardNumberLength && (cardStatus === null || cardStatus === void 0 ? void 0 : cardStatus.status) == "INVALID")
            this.isCardNumberLength = false;
        if (!this.isCardNumberLength && (cardStatus === null || cardStatus === void 0 ? void 0 : cardStatus.status) == "VALID")
            this.isCardNumberLength = true;
        this.payEmitter.emit(this.creditForm);
        this.cardImg = "assets/paymentType/" + this.cardLogo + ".svg";
    }
    defaultCard() {
        this.cardImg = "assets/paymentType/card.svg";
    }
    cardSelected(val, from) {
        val = from == 'html' ? val.value : val;
        var storedCard = this.storedCards.find((x) => x.id == val).description;
        this.cardType = storedCard.substring(0, storedCard.indexOf('ending') - 1);
        let date = new Date().toISOString().slice(0, 10);
        this.creditForm = this.fb.group({
            'paymentDate': [date, [Validators.required]],
            'description': ["Invoice no : #" + this.cardPaymentData.invoiceDetails.invoiceNumber],
            'reference': ['Invoice no : #' + this.cardPaymentData.invoiceDetails.invoiceNumber,],
            'paymentMethod': [this.cardPaymentData.cardCharges[this.cardPaymentData.cardCharges.length - 1].paymentMethodId, [Validators.required]],
            'storedCard': [val, [Validators.required]],
            'cardName': [this.cardPaymentData.customerDetails.customerName, [Validators.required]],
            'amount': [],
            'cardCharge': [this.cardPaymentData.cardCharges[this.cardPaymentData.cardCharges.length - 1].charge,],
            'isPortal': [true],
        });
        setTimeout(() => {
            this.payEmitter.emit(this.creditForm);
        }, 100);
    }
    detectCardType(number) {
        var re = {
            electron: /^(4026|417500|4405|4508|4844|4913|4917)\d+$/,
            maestro: /^(5018|5020|5038|5612|5893|6304|6759|6761|6762|6763|0604|6390)\d+$/,
            dankort: /^(5019)\d+$/,
            interpayment: /^(636)\d+$/,
            unionpay: /^(62|88)\d+$/,
            'Visa': /^4[0-9]{12}(?:[0-9]{3})?$/,
            'MasterCard': /^5[1-5][0-9]{14}$/,
            'American Express': /^3[47][0-9]{13}$/,
            diners: /^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,
            discover: /^6(?:011|5[0-9]{2})[0-9]{12}$/,
            jcb: /^(?:2131|1800|35\d{3})\d{11}$/
        };
        for (var key in re) {
            if (re[key].test(number)) {
                return key;
            }
        }
        return false;
    }
}
PaymentCardDetailsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: PaymentCardDetailsComponent, deps: [{ token: i1.FormBuilder }], target: i0.ɵɵFactoryTarget.Component });
PaymentCardDetailsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: PaymentCardDetailsComponent, selector: "lib-payment-card-details", inputs: { cardPaymentData: "cardPaymentData" }, outputs: { payEmitter: "payEmitter" }, ngImport: i0, template: "<div class=\"content-group\" style=\"margin-bottom:-16px\">\n    <select (change)=\"dropdown($event.target)\">\n        <option>Use existing credit card</option>\n        <option>Set up new debit or credit card</option>\n    </select><i class=\"fa-solid fa-angle-down\"></i>\n    <div class=\"vh\"></div>\n</div>\n\n<div *ngIf=\"card\">\n    <div class=\"content-group\" style=\"margin-top:32px;margin-bottom: 0;\">\n        <div class=\"lable\">Select card</div>\n        <select (change)=\"cardSelected($event.target,'html')\">\n            <option value=\"\" disabled selected hidden>Please select</option>\n        </select><i class=\"fa-solid fa-angle-down\"></i>\n    </div>\n</div>\n<div *ngIf=\"!card\">\n    <form [formGroup]=\"creditForm\" card container=\".card-container\" [card-width]=\"410\" [messages]=\"messages\"\n        [placeholders]=\"placeholders\" [masks]=\"masks\" [formatting]=\"formatting\" [debug]=\"debug\">\n        <div formGroupName=\"payment\">\n\n            <!-- <div class=\"content-group\"> -->\n            <div class=\"row\">\n                <div class=\"col-md-6 credit-card-hide\">\n                    <div class=\"card-container\">\n\n                    </div>\n                </div>\n                <div class=\"col-md-6\">\n                    <div class=\"content-group\">\n                        <div *ngIf=\"!companyNameSelected\" class=\"lable required\">Cardholder\u2019s name\n                        </div>\n                        <div *ngIf=\"companyNameSelected\" class=\"lable required\">Company name</div>\n                        <input class=\"field\" type=\"text\" card-name formControlName=\"cardName\" (keyup)=\"keypress()\">\n                        <!-- [style.border-color]=\"(creditForm.controls.payment.controls['cardName'].invalid && (creditForm.controls.payment.controls['cardName'].dirty || creditForm.controls.payment.controls['cardName'].touched) && creditForm.controls.payment.controls['cardName']?.errors?.required) ? '#D53847' : '#EEEEEE' \" -->\n                        <!-- <div class=\"invalid-input\" *ngIf=\"creditForm.controls.payment.controls['cardName'].invalid && (creditForm.controls.payment.controls['cardName'].dirty || creditForm.controls.payment.controls['cardName'].touched)\">\n                        <span *ngIf=\"creditForm.controls.payment.controls['cardName']?.errors?.required\"> {{\"Please enter card holder's name\" | translate}}</span>\n                    </div> -->\n\n                        <div *ngIf=\"!companyNameSelected\" class=\"company-name-link\" (click)=\"companyNameClick()\">Or\n                            click here to use a company name</div>\n                        <div *ngIf=\"companyNameSelected\" class=\"company-name-link\" (click)=\"companyNameClick()\">Or\n                            click here to use your personal information</div>\n                    </div>\n\n\n                    <div class=\"content-group\">\n                        <div class=\"lable required\">Card number</div>\n                        <input class=\"field\" type=\"tel\" autocomplete=\"cc-number\" card-number\n                            formControlName=\"cardNumber\" maxlength=\"19\" placeholder=\"xxxx xxxx xxxx xxxx\"\n                            (keyup)=\"setCardType()\" [class.error_field]=\"!isCardNumberLength\">\n                        <img *ngIf=\"cardLogo\" class=\"icon-align\" src=\"{{cardImg}}\" (error)=\"defaultCard()\"\n                            alt=\"card name\">\n                        <!--  [style.border-color]=\"(creditForm.controls.payment.controls['cardNumber'].invalid && (creditForm.controls.payment.controls['cardNumber'].dirty || creditForm.controls.payment.controls['cardNumber'].touched) && creditForm.controls.payment.controls['cardCvc']?.errors?.required ) ? '#D53847' : '#EEEEEE' \" -->\n                        <!-- <div class=\"invalid-input\" *ngIf=\"creditForm.controls.payment.controls['cardNumber'].invalid && (creditForm.controls.payment.controls['cardNumber'].dirty || creditForm.controls.payment.controls['cardNumber'].touched)\">\n                        <span *ngIf=\"creditForm.controls.payment.controls['cardNumber']?.errors?.required && !creditForm.controls.payment.controls['cardNumber']?.errors?.ccNumber\"> Please enter card number</span>\n                        <span *ngIf=\"!creditForm.controls.payment.controls['cardNumber']?.errors?.required && creditForm.controls.payment.controls['cardNumber']?.errors?.ccNumber\"> Please enter valid card number</span>\n                    </div> -->\n\n                    </div>\n                    <div class=\"row row-group\">\n                        <div class=\"col content-group\">\n                            <div class=\"lable required\">CVC</div>\n                            <input class=\"field\" type=\"password\" autocomplete=\"new-password\" pattern=\"[0-9]*\"\n                                inputmode=\"numeric\" card-cvc placeholder=\"xxx\" formControlName=\"cardCvc\"\n                                (keyup)=\"keypress()\">\n                            <!-- [style.border-color]=\"(creditForm.controls.payment.controls['cardCvc'].invalid && (creditForm.controls.payment.controls['cardCvc'].dirty || creditForm.controls.payment.controls['cardCvc'].touched) && (creditForm.controls.payment.controls['cardCvc']?.errors?.required || creditForm.controls.payment.controls['cardCvc']?.errors?.maxlength || creditForm.controls.payment.controls['cardCvc']?.errors?.minlength)) ? '#D53847' : '#EEEEEE' \" -->\n                            <!-- <div class=\"invalid-input\" *ngIf=\"creditForm.controls.payment.controls['cardCvc'].invalid && (creditForm.controls.payment.controls['cardCvc'].dirty || creditForm.controls.payment.controls['cardCvc'].touched)\">\n                                <span *ngIf=\"creditForm.controls.payment.controls['cardCvc']?.errors?.required && !creditForm.controls.payment.controls['cardCvc']?.errors?.ccCvc\">Please enter cvc number</span>\n                                <span *ngIf=\"!creditForm.controls.payment.controls['cardCvc']?.errors?.required && (creditForm.controls.payment.controls['cardCvc']?.errors?.maxlength || creditForm.controls.payment.controls['cardCvc']?.errors?.minlength)\">Please enter valid cvc number</span>\n                            </div> -->\n                        </div>\n                        <div class=\"col content-group\">\n                            <div class=\"lable required\">Exp date</div>\n                            <input class=\"field\" type=\"tel\" autocomplete=\"cc-exp\" card-expiry formControlName=\"expiry\"\n                                placeholder=\"MM / YY\" (keyup)=\"keypress()\">\n                            <!-- [style.border-color]=\"(creditForm.controls.payment.controls['expiry'].invalid && (creditForm.controls.payment.controls['expiry'].dirty || creditForm.controls.payment.controls['expiry'].touched) && (creditForm.controls.payment.controls['expiry']?.errors?.required || creditForm.controls.payment.controls['expiry']?.errors?.expDate)) ? '#D53847' : '#EEEEEE' \" -->\n                            <!-- <div class=\"invalid-input\" *ngIf=\"creditForm.controls.payment.controls['expiry'].invalid && (creditForm.controls.payment.controls['expiry'].dirty || creditForm.controls.payment.controls['expiry'].touched)\">\n                            <span *ngIf=\"!creditForm.controls.payment.controls['expiry']?.errors?.expDate && creditForm.controls.payment.controls['expiry']?.errors?.required\">Please enter expiry date</span>\n                            <span *ngIf=\"!creditForm.controls.payment.controls['expiry']?.errors?.required && creditForm.controls.payment.controls['expiry']?.errors?.expDate\">Please enter valid expiry date</span>\n                        </div> -->\n                        </div>\n                        <!-- <div class=\"col-md-12 mt-2\">\n                                                <label class=\"payment-info-all-same-align required_field\">Card holder's name</label>\n                                                <input type=\"text\" class=\"form-control\" name=\"first-name\" card-name formControlName=\"cardName\">\n                                                 <div class=\"invalid-input\" *ngIf=\"creditForm.controls.payment.controls['cardName'].invalid && (creditForm.controls.payment.controls['cardName'].dirty || creditForm.controls.payment.controls['cardName'].touched)\">\n                                                    <span *ngIf=\"creditForm.controls.payment.controls['cardName']?.errors?.required\">Please enter card holder's name </span>\n                                                </div> \n                                            </div>\n                                            <div class=\"col-md-12 mt-2\">\n                                                <label class=\"payment-info-all-same-align required_field\">Card number</label>\n                                                <input id=\"cc-number\" class=\"form-control\" type=\"tel\" autocomplete=\"cc-number\" name=\"number\" card-number formControlName=\"cardNumber\"/>\n                                                <div class=\"invalid-input\" *ngIf=\"creditForm.controls.payment.controls['cardNumber'].invalid && (creditForm.controls.payment.controls['cardNumber'].dirty || creditForm.controls.payment.controls['cardNumber'].touched)\">\n                                                    <span *ngIf=\"creditForm.controls.payment.controls['cardNumber']?.errors?.required && !creditForm.controls.payment.controls['cardNumber']?.errors?.ccNumber\">Please enter card number </span>\n                                                    <span *ngIf=\"!creditForm.controls.payment.controls['cardNumber']?.errors?.required && creditForm.controls.payment.controls['cardNumber']?.errors?.ccNumber\">Please enter valid card number </span>\n                                                </div> \n                                            </div>\n                                            <div class=\"row\">\n                                                <div class=\"col-md-6 mt-2\">\n                                                    <label class=\"payment-info-all-same-align required_field\">CVC</label>\n                                                    <input id=\"cc-cvc\" type=\"password\" autocomplete=\"off\" ccCvc class=\"form-control\" name=\"cvc\" card-cvc formControlName=\"cardCvc\">\n                                                     <div class=\"invalid-input\" *ngIf=\"creditForm.controls.payment.controls['cardCvc'].invalid && (creditForm.controls.payment.controls['cardCvc'].dirty || creditForm.controls.payment.controls['cardCvc'].touched)\">\n                                                        <span *ngIf=\"creditForm.controls.payment.controls['cardCvc']?.errors?.required && !creditForm.controls.payment.controls['cardCvc']?.errors?.ccCvc\">Please enter cvc number</span>\n                                                        <span *ngIf=\"!creditForm.controls.payment.controls['cardCvc']?.errors?.required && (creditForm.controls.payment.controls['cardCvc']?.errors?.maxlength || creditForm.controls.payment.controls['cardCvc']?.errors?.minlength)\">Please enter valid cvc number</span>\n                                                    </div> \n                                                </div>\n                                                <div class=\"col-md-6 mt-2\">\n                                                    <label class=\"payment-info-all-same-align required_field\">Expiry</label>\n                                                    <input id=\"cc-exp-date\" type=\"tel\" autocomplete=\"cc-exp\" ccExp class=\"form-control\" name=\"expiry\" card-expiry formControlName=\"expiry\">\n                                                     <div class=\"invalid-input\" *ngIf=\"creditForm.controls.payment.controls['expiry'].invalid && (creditForm.controls.payment.controls['expiry'].dirty || creditForm.controls.payment.controls['expiry'].touched)\">\n                                                        <span *ngIf=\"!creditForm.controls.payment.controls['expiry']?.errors?.expDate && creditForm.controls.payment.controls['expiry']?.errors?.required\">Please enter expiry date</span>\n                                                        <span *ngIf=\"!creditForm.controls.payment.controls['expiry']?.errors?.required && creditForm.controls.payment.controls['expiry']?.errors?.expDate\">Please enter valid expiry date</span>\n                                                    </div> \n                                                </div> -->\n                    </div>\n                </div>\n            </div>\n            <div class=\"content-group\" style=\"margin-bottom: 0;\">\n                <div class=\"lable required\">Email address</div>\n                <input class=\"field\" formControlName=\"email\" type=\"email\" (keyup)=\"keypress()\">\n                <div class=\"email-info\">This email will only be used to keep you updated about their payments</div>\n            </div>\n        </div>\n    </form>\n</div>", styles: [".content-group{margin:16px 0;font-size:14px}.content-group .vh{border-bottom:1px dashed var(--primaryBorderColor);margin:16px 0}.content-group select{cursor:pointer;appearance:none;background-color:#fff;border:1px solid var(--primaryBorderColor);border-radius:4px;padding:0 5px;color:var(--primaryTextColor)}.content-group select:focus-visible{outline:1px solid var(--inputHighlight)}.content-group .fa-angle-down{position:absolute;margin-left:-30px;margin-top:13px;color:var(--primaryTextColor)}.row-group{margin:-16px 0 0;grid-gap:24px;gap:24px}.row-group .col{padding:0}select{width:100%;height:40px}.icon-align{margin-top:4px;width:50px;position:absolute;margin-left:-54px}.lable{font-size:14px;color:var(--primaryTextColor);padding-bottom:8px}.field{width:100%;border:1px solid var(--primaryBorderColor);border-radius:4px;height:40px;padding:0 5px;color:var(--primaryTextColor)}.field:focus-visible{outline:1px solid var(--inputHighlight)}.error_field{border-color:var(--negativeButtonColour)}.error_field:focus-visible{outline:none}.company-name-link{padding-top:8px;color:var(--tertiaryButtonFontColour);cursor:pointer;max-width:-moz-fit-content;max-width:fit-content}.email-info{color:var(--positiveFoundation);margin-top:8px}.credit-card-hide{margin:auto}.card-container{margin-top:25px}.invalid-input{margin-top:5px;color:#b94a48}@media (max-width: 857px){.card-container{transform:scale(.9)}}@media (max-width: 768px){.card-container{transform:scale(.79)}.content-group{margin:12px 0}}@media (max-width: 578px){.row-group{grid-gap:16px;gap:16px}}@media (max-width: 425px){.card-container{margin-bottom:12px;margin-top:0;margin-left:0;transform:scale(.9)!important}}@media (max-width: 380px){.card-container{margin-top:0;margin-left:0;margin-bottom:0;transform:scale(.8)!important}}@media (max-width: 320px){.card-container{margin-left:-20px;margin-top:0;margin-bottom:0;transform:scale(.65)!important}}\n"], directives: [{ type: i1.NgSelectOption, selector: "option", inputs: ["ngValue", "value"] }, { type: i1.ɵNgSelectMultipleOption, selector: "option", inputs: ["ngValue", "value"] }, { type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i1.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i1.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i3.NgxCard, selector: "[card]", inputs: ["formatting", "debug", "messages", "placeholders", "container", "card-width", "masks"] }, { type: i1.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i1.FormGroupName, selector: "[formGroupName]", inputs: ["formGroupName"] }, { type: i1.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i3.NgxCardNameTemplate, selector: "[card-name]" }, { type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i1.FormControlName, selector: "[formControlName]", inputs: ["disabled", "formControlName", "ngModel"], outputs: ["ngModelChange"] }, { type: i3.NgxCardNumberTemplate, selector: "[card-number]" }, { type: i1.MaxLengthValidator, selector: "[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]", inputs: ["maxlength"] }, { type: i1.PatternValidator, selector: "[pattern][formControlName],[pattern][formControl],[pattern][ngModel]", inputs: ["pattern"] }, { type: i3.NgxCardCvcTemplate, selector: "[card-cvc]" }, { type: i3.NgxCardExpiryTemplate, selector: "[card-expiry]" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: PaymentCardDetailsComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'lib-payment-card-details',
                    templateUrl: './payment-card-details.component.html',
                    styleUrls: ['./payment-card-details.component.scss']
                }]
        }], ctorParameters: function () { return [{ type: i1.FormBuilder }]; }, propDecorators: { payEmitter: [{
                type: Output
            }], cardPaymentData: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF5bWVudC1jYXJkLWRldGFpbHMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvcGFyZW50cGF5bWVudC9zcmMvbGliL3BheW1lbnQtZGV0YWlscy9wYXltZW50LWNhcmQtZGV0YWlscy9wYXltZW50LWNhcmQtZGV0YWlscy5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9wYXJlbnRwYXltZW50L3NyYy9saWIvcGF5bWVudC1kZXRhaWxzL3BheW1lbnQtY2FyZC1kZXRhaWxzL3BheW1lbnQtY2FyZC1kZXRhaWxzLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDL0UsT0FBTyxFQUF1QyxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNqRixPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQzs7Ozs7QUFPMUQsTUFBTSxPQUFPLDJCQUEyQjtJQVN0QyxZQUNVLEVBQWU7UUFBZixPQUFFLEdBQUYsRUFBRSxDQUFhO1FBUmYsZUFBVSxHQUFxQixJQUFJLFlBQVksRUFBTyxDQUFDO1FBR2pFLGdCQUFXLEdBQU0sRUFBRSxDQUFDO1FBQ3BCLGFBQVEsR0FBTSxFQUFFLENBQUM7UUFNakIsU0FBSSxHQUFTLEtBQUssQ0FBQztRQUVuQixjQUFTLEdBQVcsR0FBRyxDQUFDO1FBQ3hCLGFBQVEsR0FBUSxFQUFDLFNBQVMsRUFBRSxhQUFhLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUUseUJBQXlCO1FBQzFGLGlCQUFZLEdBQVEsRUFBQyxNQUFNLEVBQUUscUJBQXFCLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVB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RUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDdkIsT0FBTyxHQUFHLENBQUE7YUFDWDtTQUNKO1FBQ0QsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDOzt5SEExSVksMkJBQTJCOzZHQUEzQiwyQkFBMkIsdUpDVHhDLHU0WkE0SE07NEZEbkhPLDJCQUEyQjtrQkFMdkMsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsMEJBQTBCO29CQUNwQyxXQUFXLEVBQUUsdUNBQXVDO29CQUNwRCxTQUFTLEVBQUUsQ0FBQyx1Q0FBdUMsQ0FBQztpQkFDckQ7a0dBR1csVUFBVTtzQkFBbkIsTUFBTTtnQkFLRSxlQUFlO3NCQUF2QixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgLElucHV0ICxPdXRwdXQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUJ1aWxkZXIsIEZvcm1Db250cm9sLCBGb3JtR3JvdXAsIFZhbGlkYXRvcnMgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBDcmVkaXRDYXJkVmFsaWRhdG9ycyB9IGZyb20gJ2FuZ3VsYXItY2MtbGlicmFyeSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2xpYi1wYXltZW50LWNhcmQtZGV0YWlscycsXG4gIHRlbXBsYXRlVXJsOiAnLi9wYXltZW50LWNhcmQtZGV0YWlscy5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3BheW1lbnQtY2FyZC1kZXRhaWxzLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgUGF5bWVudENhcmREZXRhaWxzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBAT3V0cHV0KCkgcGF5RW1pdHRlcjpFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBcbiAgdXNlckRhdGE6IGFueTtcbiAgc3RvcmVkQ2FyZHM6IGFueT1bXTtcbiAgY2FyZFR5cGU6IGFueT0nJztcbiAgQElucHV0KCkgY2FyZFBheW1lbnREYXRhOmFueTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGZiOiBGb3JtQnVpbGRlcixcbiAgKSB7IH1cbiAgY2FyZDpib29sZWFuPWZhbHNlO1xuICBjb250YWluZXI6IGFueTtcbiAgY2FyZHdpZHRoOiBOdW1iZXIgPSAzNTA7XG4gIG1lc3NhZ2VzOiBhbnkgPSB7dmFsaWREYXRlOiAndmFsaWRcXG5kYXRlJywgbW9udGhZZWFyOiAnbW0veXknfTsgIC8vU3RyaW5ncyBmb3IgdHJhbnNsYXRpb25cbiAgcGxhY2Vob2xkZXJzOiBhbnkgPSB7bnVtYmVyOiAn4oCi4oCi4oCi4oCiIOKAouKAouKAouKAoiDigKLigKLigKLigKIg4oCi4oCi4oCi4oCiJywgbmFtZTogJ0Z1bGwgTmFtZScsIGV4cGlyeTogJ+KAouKAoi/igKLigKInLCBjdmM6ICfigKLigKLigKInfSAvLyBQbGFjZWhvbGRlcnMgZm9yIHJlbmRlcmVkIGZpZWxkc1xuICBtYXNrczogYW55O1xuICBmb3JtYXR0aW5nOiBib29sZWFuID0gdHJ1ZTtcbiAgZGVidWc6IGJvb2xlYW4gPSB0cnVlOyAvLyBJZiB0cnVlLCB3aWxsIGxvZyBoZWxwZnVsIG1lc3NhZ2VzIGZvciBzZXR0aW5nIHVwIENhcmRcbiAgY3JlZGl0Rm9ybSE6IEZvcm1Hcm91cDtcbiAgc3VtbWFyeTogYW55O1xuICBjb21wYW55TmFtZVNlbGVjdGVkOmJvb2xlYW49ZmFsc2U7XG4gIGlzQ2FyZE51bWJlckxlbmd0aDogYm9vbGVhbj10cnVlO1xuICBjYXJkTG9nbzogYW55PScnO1xuICBjYXJkSW1nOiBzdHJpbmcgPSBcIlwiO1xuXG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5wYXlFbWl0dGVyLmVtaXQodHJ1ZSk7XG4gIH1cblxuICBkcm9wZG93bih2YWw6YW55KXtcbiAgICB0aGlzLmNhcmRUeXBlPWZhbHNlO1xuICAgIHRoaXMucGF5RW1pdHRlci5lbWl0KGZhbHNlKTtcbiAgICBpZih2YWwgPT0gJ1NldCB1cCBuZXcgZGViaXQgb3IgY3JlZGl0IGNhcmQnKXtcbiAgICAgICAgdGhpcy5jYXJkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYnVpbGRDcmVkaXRGb3JtcygpXG4gICAgfVxuICAgIC8vIHRoaXMudHJhbnNsYXRlLmdldChcIlVzZSBleGlzdGluZyBjcmVkaXQgY2FyZFwiKS5zdWJzY3JpYmUodHJhbnNsYXRpb25zID0+IHtcbiAgICAvLyAgIGlmKHZhbC52YWx1ZT09IHRyYW5zbGF0aW9ucyl7XG4gICAgLy8gICAgIHRoaXMuY2FyZD10cnVlXG4gICAgLy8gICAgIGlmKHRoaXMuc3RvcmVkQ2FyZHMubGVuZ3RoID09IDEpe1xuICAgIC8vICAgICAgIHRoaXMuY2FyZFNlbGVjdGVkKHRoaXMuc3RvcmVkQ2FyZHNbMF0uaWQsJ3RzJylcbiAgICAvLyAgICAgfVxuICAgIC8vICAgfVxuICAgIC8vICAgZWxzZXtcbiAgICAvLyAgICAgdGhpcy5jYXJkPWZhbHNlXG4gICAgLy8gICAgIHRoaXMuYnVpbGRDcmVkaXRGb3JtcygpXG4gICAgLy8gICB9XG4gICAgLy8gfSlcblxuICB9XG4gXG4gIGJ1aWxkQ3JlZGl0Rm9ybXMoKXtcbiAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7ICBcbiAgICB0aGlzLmNyZWRpdEZvcm0gPSB0aGlzLmZiLmdyb3VwKHtcbiAgICAgIHBheW1lbnQ6IHRoaXMuZmIuZ3JvdXAoe1xuICAgICAgJ2Ftb3VudCc6IFssIF0sXG4gICAgICAnY2FyZENoYXJnZSc6IFt0aGlzLmNhcmRQYXltZW50RGF0YS5jYXJkQ2hhcmdlc1snJ10gXSwvL2luZGV4IFVJIG5lZWRlZFxuICAgICAgJ2NhcmROYW1lJzogW3RoaXMuY2FyZFBheW1lbnREYXRhLmN1c3RvbWVyRGV0YWlscy5jdXN0b21lck5hbWUsIFtWYWxpZGF0b3JzLnJlcXVpcmVkXSBdLFxuICAgICAgJ2NhcmROdW1iZXInOiBbJycsIFtWYWxpZGF0b3JzLnJlcXVpcmVkLCBDcmVkaXRDYXJkVmFsaWRhdG9ycy52YWxpZGF0ZUNDTnVtYmVyXV0sXG4gICAgICAnY2FyZEN2Yyc6IFsnJywgW1ZhbGlkYXRvcnMucmVxdWlyZWQsIFZhbGlkYXRvcnMubWluTGVuZ3RoKDMpLCBWYWxpZGF0b3JzLm1heExlbmd0aCg0KV1dLFxuICAgICAgJ3BheW1lbnREYXRlJzogW2RhdGVdLFxuICAgICAgJ2Rlc2NyaXB0aW9uJzogW1wiSW52b2ljZSBubyA6IFwiK3RoaXMuY2FyZFBheW1lbnREYXRhLmludm9pY2VEZXRhaWxzLmludm9pY2VOdW1iZXJdLFxuICAgICAgJ2lzcG9ydGFsJzogW3RydWUgXSxcbiAgICAgICdyZWZlcmVuY2UnOiBbJ0ludm9pY2Ugbm8gOiAnK3RoaXMuY2FyZFBheW1lbnREYXRhLmludm9pY2VEZXRhaWxzLmludm9pY2VOdW1iZXIsIF0sXG4gICAgICAnZW1haWwnOiBbdGhpcy5jYXJkUGF5bWVudERhdGEuY3VzdG9tZXJEZXRhaWxzLmVtYWlsSWQsW1ZhbGlkYXRvcnMucmVxdWlyZWQsIFZhbGlkYXRvcnMuZW1haWxdXSxcbiAgICAgICdleHBpcnknOiBbJycsIFtWYWxpZGF0b3JzLnJlcXVpcmVkLCBDcmVkaXRDYXJkVmFsaWRhdG9ycy52YWxpZGF0ZUV4cERhdGVdXSxcblxuICAgICAgXCJwYXltZW50TWV0aG9kXCI6W3RoaXMuY2FyZFBheW1lbnREYXRhLmNhcmRDaGFyZ2VzWycnXV0sXG4gICAgICBcImRvbnRTZW5kVG9BY2NvdW50c1wiOlsnJ10sXG4gICAgICB9KVxuXG4gICAgfSk7XG4gICAgdGhpcy5wbGFjZWhvbGRlcnMgPSB7bmFtZTogdGhpcy5jYXJkUGF5bWVudERhdGEuY3VzdG9tZXJEZXRhaWxzLmN1c3RvbWVyTmFtZT90aGlzLmNhcmRQYXltZW50RGF0YS5jdXN0b21lckRldGFpbHMuY3VzdG9tZXJOYW1lOidGdWxsIE5hbWUnfTtcbiAgfVxuXG4gIGNvbXBhbnlOYW1lQ2xpY2soKXtcbiAgICB0aGlzLmNvbXBhbnlOYW1lU2VsZWN0ZWQ9IXRoaXMuY29tcGFueU5hbWVTZWxlY3RlZDtcbiAgICB0aGlzLmNyZWRpdEZvcm0ucGF0Y2hWYWx1ZSh7J3BheW1lbnQnOnsnY2FyZE5hbWUnOicnfX0pO1xuICB9XG4gIGtleXByZXNzKCl7XG4gICAgdGhpcy5wYXlFbWl0dGVyLmVtaXQodGhpcy5jcmVkaXRGb3JtKTtcbiAgfVxuICBzZXRDYXJkVHlwZSgpe1xuICAgIHRoaXMuY2FyZExvZ289dGhpcy5kZXRlY3RDYXJkVHlwZSh0aGlzLmNyZWRpdEZvcm0udmFsdWUucGF5bWVudC5jYXJkTnVtYmVyLnJlcGxhY2UoL1xccy9nLCBcIlwiKSlcbiAgICB2YXIgY2FyZFN0YXR1cyA9IHRoaXMuY3JlZGl0Rm9ybS5nZXQoJ3BheW1lbnQuY2FyZE51bWJlcicpXG4gICAgaWYodGhpcy5pc0NhcmROdW1iZXJMZW5ndGggJiYgY2FyZFN0YXR1cz8uc3RhdHVzID09IFwiSU5WQUxJRFwiKXRoaXMuaXNDYXJkTnVtYmVyTGVuZ3RoPWZhbHNlO1xuICAgIGlmKCF0aGlzLmlzQ2FyZE51bWJlckxlbmd0aCAmJiBjYXJkU3RhdHVzPy5zdGF0dXMgPT0gXCJWQUxJRFwiKXRoaXMuaXNDYXJkTnVtYmVyTGVuZ3RoPXRydWU7XG4gICAgdGhpcy5wYXlFbWl0dGVyLmVtaXQodGhpcy5jcmVkaXRGb3JtKTtcbiAgICB0aGlzLmNhcmRJbWcgPSBcImFzc2V0cy9wYXltZW50VHlwZS9cIit0aGlzLmNhcmRMb2dvK1wiLnN2Z1wiXG4gIH1cbiAgZGVmYXVsdENhcmQoKXtcbiAgICB0aGlzLmNhcmRJbWcgPSBcImFzc2V0cy9wYXltZW50VHlwZS9jYXJkLnN2Z1wiXG4gIH1cbiAgY2FyZFNlbGVjdGVkKHZhbDphbnksZnJvbTpzdHJpbmcpe1xuICAgIHZhbD0gZnJvbT09J2h0bWwnID92YWwudmFsdWU6dmFsO1xuICAgIHZhciBzdG9yZWRDYXJkID0gdGhpcy5zdG9yZWRDYXJkcy5maW5kKCh4OmFueSkgPT4geC5pZCA9PSB2YWwpLmRlc2NyaXB0aW9uXG4gICAgdGhpcy5jYXJkVHlwZT1zdG9yZWRDYXJkLnN1YnN0cmluZygwLCBzdG9yZWRDYXJkLmluZGV4T2YoJ2VuZGluZycpLTEpXG4gICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApOyAgXG4gICAgdGhpcy5jcmVkaXRGb3JtID0gdGhpcy5mYi5ncm91cCh7XG4gICAgICAgICdwYXltZW50RGF0ZScgOiBbZGF0ZSwgW1ZhbGlkYXRvcnMucmVxdWlyZWRdIF0sXG4gICAgICAgICdkZXNjcmlwdGlvbicgOiBbXCJJbnZvaWNlIG5vIDogI1wiK3RoaXMuY2FyZFBheW1lbnREYXRhLmludm9pY2VEZXRhaWxzLmludm9pY2VOdW1iZXJdLFxuICAgICAgICAncmVmZXJlbmNlJyA6IFsnSW52b2ljZSBubyA6ICMnK3RoaXMuY2FyZFBheW1lbnREYXRhLmludm9pY2VEZXRhaWxzLmludm9pY2VOdW1iZXIsIF0sXG4gICAgICAgICdwYXltZW50TWV0aG9kJyA6IFt0aGlzLmNhcmRQYXltZW50RGF0YS5jYXJkQ2hhcmdlc1t0aGlzLmNhcmRQYXltZW50RGF0YS5jYXJkQ2hhcmdlcy5sZW5ndGgtMV0ucGF5bWVudE1ldGhvZElkLCBbVmFsaWRhdG9ycy5yZXF1aXJlZF1dLFxuICAgICAgICAnc3RvcmVkQ2FyZCcgOiBbdmFsLCBbVmFsaWRhdG9ycy5yZXF1aXJlZF1dLFxuICAgICAgICAnY2FyZE5hbWUnIDogW3RoaXMuY2FyZFBheW1lbnREYXRhLmN1c3RvbWVyRGV0YWlscy5jdXN0b21lck5hbWUsIFtWYWxpZGF0b3JzLnJlcXVpcmVkXV0sXG4gICAgICAgICdhbW91bnQnIDogW10sXG4gICAgICAgICdjYXJkQ2hhcmdlJyA6IFt0aGlzLmNhcmRQYXltZW50RGF0YS5jYXJkQ2hhcmdlc1t0aGlzLmNhcmRQYXltZW50RGF0YS5jYXJkQ2hhcmdlcy5sZW5ndGgtMV0uY2hhcmdlLCBdLFxuICAgICAgICAnaXNQb3J0YWwnIDogW3RydWVdLFxuICAgICAgfSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5wYXlFbWl0dGVyLmVtaXQodGhpcy5jcmVkaXRGb3JtKTtcbiAgICAgIH0sIDEwMCk7XG59XG5cbmRldGVjdENhcmRUeXBlKG51bWJlcjpudW1iZXIpIHtcbiAgdmFyIHJlIDphbnkgPSB7XG4gICAgICBlbGVjdHJvbjogL14oNDAyNnw0MTc1MDB8NDQwNXw0NTA4fDQ4NDR8NDkxM3w0OTE3KVxcZCskLyxcbiAgICAgIG1hZXN0cm86IC9eKDUwMTh8NTAyMHw1MDM4fDU2MTJ8NTg5M3w2MzA0fDY3NTl8Njc2MXw2NzYyfDY3NjN8MDYwNHw2MzkwKVxcZCskLyxcbiAgICAgIGRhbmtvcnQ6IC9eKDUwMTkpXFxkKyQvLFxuICAgICAgaW50ZXJwYXltZW50OiAvXig2MzYpXFxkKyQvLFxuICAgICAgdW5pb25wYXk6IC9eKDYyfDg4KVxcZCskLyxcbiAgICAgICdWaXNhJzogL140WzAtOV17MTJ9KD86WzAtOV17M30pPyQvLFxuICAgICAgJ01hc3RlckNhcmQnOiAvXjVbMS01XVswLTldezE0fSQvLFxuICAgICAgJ0FtZXJpY2FuIEV4cHJlc3MnOiAvXjNbNDddWzAtOV17MTN9JC8sXG4gICAgICBkaW5lcnM6IC9eMyg/OjBbMC01XXxbNjhdWzAtOV0pWzAtOV17MTF9JC8sXG4gICAgICBkaXNjb3ZlcjogL142KD86MDExfDVbMC05XXsyfSlbMC05XXsxMn0kLyxcbiAgICAgIGpjYjogL14oPzoyMTMxfDE4MDB8MzVcXGR7M30pXFxkezExfSQvXG4gIH1cblxuICBmb3IodmFyIGtleSBpbiByZSkge1xuICAgICAgaWYocmVba2V5XS50ZXN0KG51bWJlcikpIHtcbiAgICAgICAgcmV0dXJuIGtleVxuICAgICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG59XG4iLCI8ZGl2IGNsYXNzPVwiY29udGVudC1ncm91cFwiIHN0eWxlPVwibWFyZ2luLWJvdHRvbTotMTZweFwiPlxuICAgIDxzZWxlY3QgKGNoYW5nZSk9XCJkcm9wZG93bigkZXZlbnQudGFyZ2V0KVwiPlxuICAgICAgICA8b3B0aW9uPlVzZSBleGlzdGluZyBjcmVkaXQgY2FyZDwvb3B0aW9uPlxuICAgICAgICA8b3B0aW9uPlNldCB1cCBuZXcgZGViaXQgb3IgY3JlZGl0IGNhcmQ8L29wdGlvbj5cbiAgICA8L3NlbGVjdD48aSBjbGFzcz1cImZhLXNvbGlkIGZhLWFuZ2xlLWRvd25cIj48L2k+XG4gICAgPGRpdiBjbGFzcz1cInZoXCI+PC9kaXY+XG48L2Rpdj5cblxuPGRpdiAqbmdJZj1cImNhcmRcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY29udGVudC1ncm91cFwiIHN0eWxlPVwibWFyZ2luLXRvcDozMnB4O21hcmdpbi1ib3R0b206IDA7XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJsYWJsZVwiPlNlbGVjdCBjYXJkPC9kaXY+XG4gICAgICAgIDxzZWxlY3QgKGNoYW5nZSk9XCJjYXJkU2VsZWN0ZWQoJGV2ZW50LnRhcmdldCwnaHRtbCcpXCI+XG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCIgZGlzYWJsZWQgc2VsZWN0ZWQgaGlkZGVuPlBsZWFzZSBzZWxlY3Q8L29wdGlvbj5cbiAgICAgICAgPC9zZWxlY3Q+PGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1hbmdsZS1kb3duXCI+PC9pPlxuICAgIDwvZGl2PlxuPC9kaXY+XG48ZGl2ICpuZ0lmPVwiIWNhcmRcIj5cbiAgICA8Zm9ybSBbZm9ybUdyb3VwXT1cImNyZWRpdEZvcm1cIiBjYXJkIGNvbnRhaW5lcj1cIi5jYXJkLWNvbnRhaW5lclwiIFtjYXJkLXdpZHRoXT1cIjQxMFwiIFttZXNzYWdlc109XCJtZXNzYWdlc1wiXG4gICAgICAgIFtwbGFjZWhvbGRlcnNdPVwicGxhY2Vob2xkZXJzXCIgW21hc2tzXT1cIm1hc2tzXCIgW2Zvcm1hdHRpbmddPVwiZm9ybWF0dGluZ1wiIFtkZWJ1Z109XCJkZWJ1Z1wiPlxuICAgICAgICA8ZGl2IGZvcm1Hcm91cE5hbWU9XCJwYXltZW50XCI+XG5cbiAgICAgICAgICAgIDwhLS0gPGRpdiBjbGFzcz1cImNvbnRlbnQtZ3JvdXBcIj4gLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC02IGNyZWRpdC1jYXJkLWhpZGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtY29udGFpbmVyXCI+XG5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC02XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50LWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiIWNvbXBhbnlOYW1lU2VsZWN0ZWRcIiBjbGFzcz1cImxhYmxlIHJlcXVpcmVkXCI+Q2FyZGhvbGRlcuKAmXMgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiY29tcGFueU5hbWVTZWxlY3RlZFwiIGNsYXNzPVwibGFibGUgcmVxdWlyZWRcIj5Db21wYW55IG5hbWU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZpZWxkXCIgdHlwZT1cInRleHRcIiBjYXJkLW5hbWUgZm9ybUNvbnRyb2xOYW1lPVwiY2FyZE5hbWVcIiAoa2V5dXApPVwia2V5cHJlc3MoKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBbc3R5bGUuYm9yZGVyLWNvbG9yXT1cIihjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmROYW1lJ10uaW52YWxpZCAmJiAoY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkTmFtZSddLmRpcnR5IHx8IGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snY2FyZE5hbWUnXS50b3VjaGVkKSAmJiBjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmROYW1lJ10/LmVycm9ycz8ucmVxdWlyZWQpID8gJyNENTM4NDcnIDogJyNFRUVFRUUnIFwiIC0tPlxuICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSA8ZGl2IGNsYXNzPVwiaW52YWxpZC1pbnB1dFwiICpuZ0lmPVwiY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkTmFtZSddLmludmFsaWQgJiYgKGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snY2FyZE5hbWUnXS5kaXJ0eSB8fCBjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmROYW1lJ10udG91Y2hlZClcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkTmFtZSddPy5lcnJvcnM/LnJlcXVpcmVkXCI+IHt7XCJQbGVhc2UgZW50ZXIgY2FyZCBob2xkZXIncyBuYW1lXCIgfCB0cmFuc2xhdGV9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+IC0tPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiIWNvbXBhbnlOYW1lU2VsZWN0ZWRcIiBjbGFzcz1cImNvbXBhbnktbmFtZS1saW5rXCIgKGNsaWNrKT1cImNvbXBhbnlOYW1lQ2xpY2soKVwiPk9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2sgaGVyZSB0byB1c2UgYSBjb21wYW55IG5hbWU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJjb21wYW55TmFtZVNlbGVjdGVkXCIgY2xhc3M9XCJjb21wYW55LW5hbWUtbGlua1wiIChjbGljayk9XCJjb21wYW55TmFtZUNsaWNrKClcIj5PclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrIGhlcmUgdG8gdXNlIHlvdXIgcGVyc29uYWwgaW5mb3JtYXRpb248L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cblxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudC1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxhYmxlIHJlcXVpcmVkXCI+Q2FyZCBudW1iZXI8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZpZWxkXCIgdHlwZT1cInRlbFwiIGF1dG9jb21wbGV0ZT1cImNjLW51bWJlclwiIGNhcmQtbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiY2FyZE51bWJlclwiIG1heGxlbmd0aD1cIjE5XCIgcGxhY2Vob2xkZXI9XCJ4eHh4IHh4eHggeHh4eCB4eHh4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoa2V5dXApPVwic2V0Q2FyZFR5cGUoKVwiIFtjbGFzcy5lcnJvcl9maWVsZF09XCIhaXNDYXJkTnVtYmVyTGVuZ3RoXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nICpuZ0lmPVwiY2FyZExvZ29cIiBjbGFzcz1cImljb24tYWxpZ25cIiBzcmM9XCJ7e2NhcmRJbWd9fVwiIChlcnJvcik9XCJkZWZhdWx0Q2FyZCgpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9XCJjYXJkIG5hbWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gIFtzdHlsZS5ib3JkZXItY29sb3JdPVwiKGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snY2FyZE51bWJlciddLmludmFsaWQgJiYgKGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snY2FyZE51bWJlciddLmRpcnR5IHx8IGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snY2FyZE51bWJlciddLnRvdWNoZWQpICYmIGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snY2FyZEN2YyddPy5lcnJvcnM/LnJlcXVpcmVkICkgPyAnI0Q1Mzg0NycgOiAnI0VFRUVFRScgXCIgLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8IS0tIDxkaXYgY2xhc3M9XCJpbnZhbGlkLWlucHV0XCIgKm5nSWY9XCJjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmROdW1iZXInXS5pbnZhbGlkICYmIChjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmROdW1iZXInXS5kaXJ0eSB8fCBjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmROdW1iZXInXS50b3VjaGVkKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmROdW1iZXInXT8uZXJyb3JzPy5yZXF1aXJlZCAmJiAhY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkTnVtYmVyJ10/LmVycm9ycz8uY2NOdW1iZXJcIj4gUGxlYXNlIGVudGVyIGNhcmQgbnVtYmVyPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCIhY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkTnVtYmVyJ10/LmVycm9ycz8ucmVxdWlyZWQgJiYgY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkTnVtYmVyJ10/LmVycm9ycz8uY2NOdW1iZXJcIj4gUGxlYXNlIGVudGVyIHZhbGlkIGNhcmQgbnVtYmVyPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gLS0+XG5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgcm93LWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sIGNvbnRlbnQtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGFibGUgcmVxdWlyZWRcIj5DVkM8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmaWVsZFwiIHR5cGU9XCJwYXNzd29yZFwiIGF1dG9jb21wbGV0ZT1cIm5ldy1wYXNzd29yZFwiIHBhdHRlcm49XCJbMC05XSpcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dG1vZGU9XCJudW1lcmljXCIgY2FyZC1jdmMgcGxhY2Vob2xkZXI9XCJ4eHhcIiBmb3JtQ29udHJvbE5hbWU9XCJjYXJkQ3ZjXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGtleXVwKT1cImtleXByZXNzKClcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIFtzdHlsZS5ib3JkZXItY29sb3JdPVwiKGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snY2FyZEN2YyddLmludmFsaWQgJiYgKGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snY2FyZEN2YyddLmRpcnR5IHx8IGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snY2FyZEN2YyddLnRvdWNoZWQpICYmIChjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmRDdmMnXT8uZXJyb3JzPy5yZXF1aXJlZCB8fCBjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmRDdmMnXT8uZXJyb3JzPy5tYXhsZW5ndGggfHwgY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkQ3ZjJ10/LmVycm9ycz8ubWlubGVuZ3RoKSkgPyAnI0Q1Mzg0NycgOiAnI0VFRUVFRScgXCIgLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSA8ZGl2IGNsYXNzPVwiaW52YWxpZC1pbnB1dFwiICpuZ0lmPVwiY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkQ3ZjJ10uaW52YWxpZCAmJiAoY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkQ3ZjJ10uZGlydHkgfHwgY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkQ3ZjJ10udG91Y2hlZClcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmRDdmMnXT8uZXJyb3JzPy5yZXF1aXJlZCAmJiAhY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkQ3ZjJ10/LmVycm9ycz8uY2NDdmNcIj5QbGVhc2UgZW50ZXIgY3ZjIG51bWJlcjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCIhY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkQ3ZjJ10/LmVycm9ycz8ucmVxdWlyZWQgJiYgKGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snY2FyZEN2YyddPy5lcnJvcnM/Lm1heGxlbmd0aCB8fCBjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmRDdmMnXT8uZXJyb3JzPy5taW5sZW5ndGgpXCI+UGxlYXNlIGVudGVyIHZhbGlkIGN2YyBudW1iZXI8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IC0tPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sIGNvbnRlbnQtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGFibGUgcmVxdWlyZWRcIj5FeHAgZGF0ZTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZpZWxkXCIgdHlwZT1cInRlbFwiIGF1dG9jb21wbGV0ZT1cImNjLWV4cFwiIGNhcmQtZXhwaXJ5IGZvcm1Db250cm9sTmFtZT1cImV4cGlyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTU0gLyBZWVwiIChrZXl1cCk9XCJrZXlwcmVzcygpXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBbc3R5bGUuYm9yZGVyLWNvbG9yXT1cIihjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2V4cGlyeSddLmludmFsaWQgJiYgKGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snZXhwaXJ5J10uZGlydHkgfHwgY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydleHBpcnknXS50b3VjaGVkKSAmJiAoY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydleHBpcnknXT8uZXJyb3JzPy5yZXF1aXJlZCB8fCBjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2V4cGlyeSddPy5lcnJvcnM/LmV4cERhdGUpKSA/ICcjRDUzODQ3JyA6ICcjRUVFRUVFJyBcIiAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIDxkaXYgY2xhc3M9XCJpbnZhbGlkLWlucHV0XCIgKm5nSWY9XCJjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2V4cGlyeSddLmludmFsaWQgJiYgKGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snZXhwaXJ5J10uZGlydHkgfHwgY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydleHBpcnknXS50b3VjaGVkKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiIWNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snZXhwaXJ5J10/LmVycm9ycz8uZXhwRGF0ZSAmJiBjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2V4cGlyeSddPy5lcnJvcnM/LnJlcXVpcmVkXCI+UGxlYXNlIGVudGVyIGV4cGlyeSBkYXRlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiIWNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snZXhwaXJ5J10/LmVycm9ycz8ucmVxdWlyZWQgJiYgY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydleHBpcnknXT8uZXJyb3JzPy5leHBEYXRlXCI+UGxlYXNlIGVudGVyIHZhbGlkIGV4cGlyeSBkYXRlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IC0tPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8IS0tIDxkaXYgY2xhc3M9XCJjb2wtbWQtMTIgbXQtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwicGF5bWVudC1pbmZvLWFsbC1zYW1lLWFsaWduIHJlcXVpcmVkX2ZpZWxkXCI+Q2FyZCBob2xkZXIncyBuYW1lPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgbmFtZT1cImZpcnN0LW5hbWVcIiBjYXJkLW5hbWUgZm9ybUNvbnRyb2xOYW1lPVwiY2FyZE5hbWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW52YWxpZC1pbnB1dFwiICpuZ0lmPVwiY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkTmFtZSddLmludmFsaWQgJiYgKGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snY2FyZE5hbWUnXS5kaXJ0eSB8fCBjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmROYW1lJ10udG91Y2hlZClcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cImNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snY2FyZE5hbWUnXT8uZXJyb3JzPy5yZXF1aXJlZFwiPlBsZWFzZSBlbnRlciBjYXJkIGhvbGRlcidzIG5hbWUgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC0xMiBtdC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJwYXltZW50LWluZm8tYWxsLXNhbWUtYWxpZ24gcmVxdWlyZWRfZmllbGRcIj5DYXJkIG51bWJlcjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJjYy1udW1iZXJcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHR5cGU9XCJ0ZWxcIiBhdXRvY29tcGxldGU9XCJjYy1udW1iZXJcIiBuYW1lPVwibnVtYmVyXCIgY2FyZC1udW1iZXIgZm9ybUNvbnRyb2xOYW1lPVwiY2FyZE51bWJlclwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnZhbGlkLWlucHV0XCIgKm5nSWY9XCJjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmROdW1iZXInXS5pbnZhbGlkICYmIChjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmROdW1iZXInXS5kaXJ0eSB8fCBjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmROdW1iZXInXS50b3VjaGVkKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkTnVtYmVyJ10/LmVycm9ycz8ucmVxdWlyZWQgJiYgIWNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snY2FyZE51bWJlciddPy5lcnJvcnM/LmNjTnVtYmVyXCI+UGxlYXNlIGVudGVyIGNhcmQgbnVtYmVyIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cIiFjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmROdW1iZXInXT8uZXJyb3JzPy5yZXF1aXJlZCAmJiBjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmROdW1iZXInXT8uZXJyb3JzPy5jY051bWJlclwiPlBsZWFzZSBlbnRlciB2YWxpZCBjYXJkIG51bWJlciA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTYgbXQtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInBheW1lbnQtaW5mby1hbGwtc2FtZS1hbGlnbiByZXF1aXJlZF9maWVsZFwiPkNWQzwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPVwiY2MtY3ZjXCIgdHlwZT1cInBhc3N3b3JkXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgY2NDdmMgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuYW1lPVwiY3ZjXCIgY2FyZC1jdmMgZm9ybUNvbnRyb2xOYW1lPVwiY2FyZEN2Y1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW52YWxpZC1pbnB1dFwiICpuZ0lmPVwiY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkQ3ZjJ10uaW52YWxpZCAmJiAoY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkQ3ZjJ10uZGlydHkgfHwgY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkQ3ZjJ10udG91Y2hlZClcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmRDdmMnXT8uZXJyb3JzPy5yZXF1aXJlZCAmJiAhY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkQ3ZjJ10/LmVycm9ycz8uY2NDdmNcIj5QbGVhc2UgZW50ZXIgY3ZjIG51bWJlcjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCIhY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydjYXJkQ3ZjJ10/LmVycm9ycz8ucmVxdWlyZWQgJiYgKGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snY2FyZEN2YyddPy5lcnJvcnM/Lm1heGxlbmd0aCB8fCBjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2NhcmRDdmMnXT8uZXJyb3JzPy5taW5sZW5ndGgpXCI+UGxlYXNlIGVudGVyIHZhbGlkIGN2YyBudW1iZXI8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTYgbXQtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInBheW1lbnQtaW5mby1hbGwtc2FtZS1hbGlnbiByZXF1aXJlZF9maWVsZFwiPkV4cGlyeTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPVwiY2MtZXhwLWRhdGVcIiB0eXBlPVwidGVsXCIgYXV0b2NvbXBsZXRlPVwiY2MtZXhwXCIgY2NFeHAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuYW1lPVwiZXhwaXJ5XCIgY2FyZC1leHBpcnkgZm9ybUNvbnRyb2xOYW1lPVwiZXhwaXJ5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnZhbGlkLWlucHV0XCIgKm5nSWY9XCJjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2V4cGlyeSddLmludmFsaWQgJiYgKGNyZWRpdEZvcm0uY29udHJvbHMucGF5bWVudC5jb250cm9sc1snZXhwaXJ5J10uZGlydHkgfHwgY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydleHBpcnknXS50b3VjaGVkKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cIiFjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2V4cGlyeSddPy5lcnJvcnM/LmV4cERhdGUgJiYgY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydleHBpcnknXT8uZXJyb3JzPy5yZXF1aXJlZFwiPlBsZWFzZSBlbnRlciBleHBpcnkgZGF0ZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCIhY3JlZGl0Rm9ybS5jb250cm9scy5wYXltZW50LmNvbnRyb2xzWydleHBpcnknXT8uZXJyb3JzPy5yZXF1aXJlZCAmJiBjcmVkaXRGb3JtLmNvbnRyb2xzLnBheW1lbnQuY29udHJvbHNbJ2V4cGlyeSddPy5lcnJvcnM/LmV4cERhdGVcIj5QbGVhc2UgZW50ZXIgdmFsaWQgZXhwaXJ5IGRhdGU8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IC0tPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtZ3JvdXBcIiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDA7XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxhYmxlIHJlcXVpcmVkXCI+RW1haWwgYWRkcmVzczwvZGl2PlxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZpZWxkXCIgZm9ybUNvbnRyb2xOYW1lPVwiZW1haWxcIiB0eXBlPVwiZW1haWxcIiAoa2V5dXApPVwia2V5cHJlc3MoKVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbWFpbC1pbmZvXCI+VGhpcyBlbWFpbCB3aWxsIG9ubHkgYmUgdXNlZCB0byBrZWVwIHlvdSB1cGRhdGVkIGFib3V0IHRoZWlyIHBheW1lbnRzPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9mb3JtPlxuPC9kaXY+Il19
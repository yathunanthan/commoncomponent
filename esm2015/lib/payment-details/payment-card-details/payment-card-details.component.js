import { Component, Input, Output, EventEmitter } from '@angular/core';
import { Validators } from '@angular/forms';
import { CreditCardValidators } from 'angular-cc-library';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "../../serivces/common-payment.service";
import * as i3 from "@angular/common";
import * as i4 from "ngx-card/card";
import * as i5 from "ngx-card/inputs";
export class PaymentCardDetailsComponent {
    constructor(fb, commomPaymentService) {
        var _a;
        this.fb = fb;
        this.commomPaymentService = commomPaymentService;
        this.payEmitter = new EventEmitter();
        this.storedCards = [];
        this.cardType = '';
        this.card = false;
        this.cardwidth = 350;
        this.messages = { validDate: 'valid\ndate', monthYear: 'mm/yy' }; //Strings for translation
        this.placeholders = { number: '•••• •••• •••• ••••', name: 'Full Name', expiry: '••/••', cvc: '•••' }; // Placeholders for rendered fields
        this.formatting = true;
        this.debug = true; // If true, will log helpful messages for setting up Card
        this.companyNameSelected = false;
        this.isCardNumberLength = true;
        this.cardLogo = '';
        this.cardImg = "";
        this.cardPaymentData = this.cardPaymentData;
        this.commomPaymentService.paymentDetails$.subscribe((response) => {
            this.cardPaymentData = response;
        });
        this.portalName = (_a = this.commomPaymentService.apiUrl) === null || _a === void 0 ? void 0 : _a.portal;
        if (this.portalName == 'StatementPortal' || this.portalName == 'InvoicePortal') {
            this.card = true;
        }
        else {
            this.card = false;
        }
        this.buildCreditFormS();
    }
    ngOnInit() {
        var _a, _b, _c;
        this.payEmitter.emit(true);
        let invoiceAddressesId = ((_a = this.cardPaymentData.invoiceDetails) === null || _a === void 0 ? void 0 : _a.invoiceAddressId) ? this.cardPaymentData.invoiceDetails.invoiceAddressId : this.cardPaymentData.invoiceAddressNo;
        this.portalName = (_b = this.commomPaymentService.apiUrl) === null || _b === void 0 ? void 0 : _b.portal;
        this.commomPaymentService.paymentStoredCard$.subscribe((stored) => {
            this.paymentStoredDetials = stored;
        });
        console.log('invaddress0', this.paymentStoredDetials);
        console.log('cardpaymentdetal', this.cardPaymentData);
        if (((_c = this.commomPaymentService.apiUrl) === null || _c === void 0 ? void 0 : _c.apiUrl) != '') {
            if (this.paymentStoredDetials == null || this.paymentStoredDetials == undefined) {
                this.commomPaymentService.getStorecard(invoiceAddressesId).subscribe((res) => {
                    if (res && res.records) {
                        this.storedCards = res.records;
                    }
                    else {
                        this.storedCards = res;
                    }
                    this.commomPaymentService.setPaymentStoredCard(this.storedCards);
                    console.log('cardDetails', this.storedCards);
                });
            }
            else {
                this.storedCards = this.paymentStoredDetials;
                console.log('cardDetailsafter', this.storedCards);
            }
        }
    }
    dropdown(val) {
        this.card = false;
        this.payEmitter.emit(false);
        if (val.value == 'Set up new debit or credit card') {
            this.card = true;
            if (this.portalName != 'AcceptProposal') {
                this.buildCreditForms();
            }
            else {
                this.buildCreditFormS();
            }
        }
        else {
            if (this.storedCards.storedCardDetails.length == 1) {
                this.cardSelected(this.storedCards.storedCardDetails[0].id, 'ts');
            }
            this.card = false;
        }
        // this.translate.get("Use existing credit card").subscribe(translations => {
        //   if(val.value== translations){
        //     this.card=true
        //     if(this.storedCards.length == 1){
        //       this.cardSelected(this.storedCards[0].id,'ts')
        //     }
        //   }
        //   else{
        //     this.card=false
        //     this.buildCreditForms()
        //   }
        // })
    }
    buildCreditForms() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
        let date = new Date().toISOString().slice(0, 10);
        let invoiceNo;
        if ((_a = this.cardPaymentData.invoiceDetails) === null || _a === void 0 ? void 0 : _a.invoiceNumber) {
            invoiceNo = ((_b = this.cardPaymentData.invoiceDetails) === null || _b === void 0 ? void 0 : _b.invoiceNumber) ? "Invoice no : " + this.cardPaymentData.invoiceDetails.invoiceNumber : '';
        }
        else {
            invoiceNo = 'Opportunity no: ' + this.cardPaymentData.opportunityId;
        }
        let paymentId;
        if (((_c = this.cardPaymentData) === null || _c === void 0 ? void 0 : _c.cardCharges.length) != 0) {
            paymentId = this.cardPaymentData.cardCharges[this.commomPaymentService.cardCharges].paymentMethodId;
        }
        this.creditForm = this.fb.group({
            payment: this.fb.group({
                'cardCharge': [((_d = this.cardPaymentData) === null || _d === void 0 ? void 0 : _d.cardCharges[0].charge) ? this.cardPaymentData.cardCharges[0].charge : this.cardPaymentData.paymentCharge[0].charge],
                'cardName': [((_f = (_e = this.cardPaymentData) === null || _e === void 0 ? void 0 : _e.customerDetails) === null || _f === void 0 ? void 0 : _f.customerName) ? this.cardPaymentData.customerDetails.customerName : this.cardPaymentData.customerName, [Validators.required]],
                'cardNumber': ['', [Validators.required, CreditCardValidators.validateCCNumber]],
                'cardCvc': ['', [Validators.required, Validators.minLength(3), Validators.maxLength(4)]],
                'paymentDate': [date],
                'description': [invoiceNo],
                'isportal': [true],
                'reference': [invoiceNo],
                'email': [((_h = (_g = this.cardPaymentData) === null || _g === void 0 ? void 0 : _g.customerDetails) === null || _h === void 0 ? void 0 : _h.emailId) ? this.cardPaymentData.customerDetails.emailId : '', [Validators.required, Validators.email]],
                'expiry': ['', [Validators.required, CreditCardValidators.validateExpDate]],
                "paymentMethod": [paymentId ? paymentId : ''],
                "dontSendToAccounts": [''],
            })
        });
        this.placeholders = { name: ((_k = (_j = this.cardPaymentData) === null || _j === void 0 ? void 0 : _j.customerDetails) === null || _k === void 0 ? void 0 : _k.customerName) ? this.cardPaymentData.customerDetails.customerName : 'Full Name' };
    }
    buildCreditFormS() {
        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;
        let date = new Date().toISOString().slice(0, 10);
        let invoiceNo;
        if ((_b = (_a = this.cardPaymentData) === null || _a === void 0 ? void 0 : _a.invoiceDetails) === null || _b === void 0 ? void 0 : _b.invoiceNumber) {
            invoiceNo = ((_d = (_c = this.cardPaymentData) === null || _c === void 0 ? void 0 : _c.invoiceDetails) === null || _d === void 0 ? void 0 : _d.invoiceNumber) ? "Invoice no : " + this.cardPaymentData.invoiceDetails.invoiceNumber : '';
        }
        else {
            invoiceNo = 'Opportunity no: ' + this.cardPaymentData.opportunityId;
        }
        this.creditForm = this.fb.group({
            'amount': [((_e = this.cardPaymentData) === null || _e === void 0 ? void 0 : _e.showDeposit) ? (_f = this.cardPaymentData) === null || _f === void 0 ? void 0 : _f.showDeposit : ''],
            'cardCharge': [0],
            'cardName': [((_h = (_g = this.cardPaymentData) === null || _g === void 0 ? void 0 : _g.customerDetails) === null || _h === void 0 ? void 0 : _h.customerName) ? this.cardPaymentData.customerDetails.customerName : (_j = this.cardPaymentData) === null || _j === void 0 ? void 0 : _j.customerName, [Validators.required]],
            'cardNumber': ['', [Validators.required, CreditCardValidators.validateCCNumber]],
            'cardCvc': ['', [Validators.required, Validators.minLength(3), Validators.maxLength(4)]],
            'cardAddressLine1': ['',],
            'cardAddressLine2': ['',],
            'cardAddressLine3': ['',],
            'cardTown': ['',],
            'cardType': ['',],
            'cardCounty': ['',],
            'cardPostCode': ['',],
            'paymentDate': [date],
            'description': [invoiceNo],
            'isportal': [true],
            'email': [((_l = (_k = this.cardPaymentData) === null || _k === void 0 ? void 0 : _k.customerDetails) === null || _l === void 0 ? void 0 : _l.emailId) ? this.cardPaymentData.customerDetails.emailId : '', [Validators.required, Validators.email]],
            'expiry': ['', [Validators.required, CreditCardValidators.validateExpDate]],
            'storedCard': [0,],
            'saveCard': [true,],
            "dontSendToAccounts": [''],
        });
        this.placeholders = { name: ((_o = (_m = this.cardPaymentData) === null || _m === void 0 ? void 0 : _m.customerDetails) === null || _o === void 0 ? void 0 : _o.customerName) ? this.cardPaymentData.customerDetails.customerName : 'Full Name' };
    }
    companyNameClick() {
        this.companyNameSelected = !this.companyNameSelected;
        this.creditForm.patchValue({ 'payment': { 'cardName': '' } });
    }
    keypress() {
        this.payEmitter.emit(this.creditForm);
    }
    setCardType() {
        this.cardLogo = this.detectCardType(this.creditForm.value.payment.cardNumber.replace(/\s/g, ""));
        var cardStatus = this.creditForm.get('payment.cardNumber');
        if (this.isCardNumberLength && (cardStatus === null || cardStatus === void 0 ? void 0 : cardStatus.status) == "INVALID")
            this.isCardNumberLength = false;
        if (!this.isCardNumberLength && (cardStatus === null || cardStatus === void 0 ? void 0 : cardStatus.status) == "VALID")
            this.isCardNumberLength = true;
        this.payEmitter.emit(this.creditForm);
        this.cardImg = "assets/paymentType/" + this.cardLogo + ".svg";
    }
    defaultCard() {
        this.cardImg = "assets/paymentType/card.svg";
    }
    errorHandler() {
        this.cardLogo = 'card';
    }
    cardSelected(val, from) {
        var _a;
        if (from == 'html') {
            val = val.value;
        }
        this.cardSelectedType = from;
        this.cardType = val.toString();
        var intArr = this.cardType.split(",");
        intArr.forEach((element) => {
            const tagsData = this.storedCards.storedCardDetails.find((x) => x['id'] == element);
            this.cardLogo = tagsData.card_type;
        });
        let date = new Date().toISOString().slice(0, 10);
        let invoiceNumber = ((_a = this.cardPaymentData.invoiceDetails) === null || _a === void 0 ? void 0 : _a.invoiceNumber) ? "Invoice no : #" + this.cardPaymentData.invoiceDetails.invoiceNumber : '';
        this.creditForm = this.fb.group({
            'paymentDate': [date, [Validators.required]],
            'description': [invoiceNumber],
            'reference': [invoiceNumber],
            'paymentMethod': [this.cardPaymentData.cardCharges[this.commomPaymentService.cardCharges].paymentMethodId, [Validators.required]],
            'storedCard': [val, [Validators.required]],
            'cardName': [this.cardPaymentData.customerDetails.customerName, [Validators.required]],
            'amount': [],
            'cardCharge': [this.cardPaymentData.cardCharges[this.commomPaymentService.cardCharges].charge,],
            'isPortal': [true],
        });
        setTimeout(() => {
            this.payEmitter.emit(this.creditForm);
        }, 100);
    }
    detectCardType(number) {
        var re = {
            electron: /^(4026|417500|4405|4508|4844|4913|4917)\d+$/,
            maestro: /^(5018|5020|5038|5612|5893|6304|6759|6761|6762|6763|0604|6390)\d+$/,
            dankort: /^(5019)\d+$/,
            interpayment: /^(636)\d+$/,
            unionpay: /^(62|88)\d+$/,
            'Visa': /^4[0-9]{12}(?:[0-9]{3})?$/,
            'MasterCard': /^5[1-5][0-9]{14}$/,
            'American Express': /^3[47][0-9]{13}$/,
            diners: /^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,
            discover: /^6(?:011|5[0-9]{2})[0-9]{12}$/,
            jcb: /^(?:2131|1800|35\d{3})\d{11}$/
        };
        for (var key in re) {
            if (re[key].test(number)) {
                return key;
            }
        }
        return false;
    }
}
PaymentCardDetailsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: PaymentCardDetailsComponent, deps: [{ token: i1.FormBuilder }, { token: i2.CommonPaymentService }], target: i0.ɵɵFactoryTarget.Component });
PaymentCardDetailsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: PaymentCardDetailsComponent, selector: "lib-payment-card-details", inputs: { cardPaymentData: "cardPaymentData" }, outputs: { payEmitter: "payEmitter" }, ngImport: i0, template: "<div class=\"content-group\" *ngIf=\"storedCards.length != 0\">\n    <div class=\"content-group\" style=\"margin-bottom:-16px\" *ngIf=\"portalName != 'AcceptProposal'\">\n        <select (change)=\"dropdown($event.target)\">\n            <option>Use existing credit card</option>\n            <option>Set up new debit or credit card</option>\n        </select><i class=\"fa-solid fa-angle-down\"></i>\n        <div class=\"vh\"></div>\n    </div>\n</div>\n\n<div *ngIf=\"card\">\n    <div class=\"content-group group-card\" style=\"margin-top:32px;margin-bottom: 0;\">\n        <div class=\"lable\">Select card</div>\n        <select (selected)=\"cardSelected($event.target,'html')\"\n            [ngStyle]=\"{'padding-left': cardSelectedType == 'html' || cardSelectedType == 'ts'  ? '46px' : '' }\">\n            <option value=\"\" disabled selected hidden>Please select</option>\n            <option *ngFor=\"let card of storedCards.storedCardDetails\"\n                [selected]=\"storedCards.storedCardDetails.length == 1\" [value]=\"card.id\"><span\n                    class=\"cardDescription\">XXXX - XXXX - XXXX -\n                    {{card.description.substring(card.description.indexOf('with') + 4)| slice:0:5 }}</span></option>\n        </select><i class=\"fa-solid fa-angle-down\"></i>\n    </div>\n    <div *ngIf=\"cardSelectedType == 'html' || cardSelectedType == 'ts'\">\n        <img class=\"stored-icon-aligns\" src=\"assets/paymentType/{{cardLogo}}.svg\" (error)=\"errorHandler()\">\n    </div>\n</div>\n<div *ngIf=\"!card\">\n    <div *ngIf=\"portalName != 'AcceptProposal'\">\n        <form [formGroup]=\"creditForm\" card container=\".card-container\" [card-width]=\"410\" [messages]=\"messages\"\n            [placeholders]=\"placeholders\" [masks]=\"masks\" [formatting]=\"formatting\" [debug]=\"debug\">\n            <ng-container formGroupName=\"payment\">\n                <div class=\"row\">\n                    <div class=\"col-md-6 credit-card-hide\">\n                        <div class=\"card-container\">\n\n                        </div>\n                    </div>\n                    <div class=\"col-md-6\">\n                        <div class=\"content-group\">\n                            <div *ngIf=\"!companyNameSelected\" class=\"lable required\">Cardholder's name\n                            </div>\n                            <div *ngIf=\"companyNameSelected\" class=\"lable required\">Company name</div>\n                            <input class=\"field\" type=\"text\" card-name formControlName=\"cardName\" (keyup)=\"keypress()\">\n                            <div *ngIf=\"!companyNameSelected\" class=\"company-name-link\" (click)=\"companyNameClick()\">Or\n                                click here to use a company name</div>\n                            <div *ngIf=\"companyNameSelected\" class=\"company-name-link\" (click)=\"companyNameClick()\">Or\n                                click here to use your personal information</div>\n                        </div>\n                        <div class=\"content-group\">\n                            <div class=\"lable required\">Card number</div>\n                            <input class=\"field\" type=\"tel\" autocomplete=\"cc-number\" card-number\n                                formControlName=\"cardNumber\" maxlength=\"19\" placeholder=\"xxxx xxxx xxxx xxxx\"\n                                (keyup)=\"setCardType()\" [class.error_field]=\"!isCardNumberLength\">\n                            <img *ngIf=\"cardLogo\" class=\"icon-align\" src=\"{{cardImg}}\" (error)=\"defaultCard()\"\n                                alt=\"card name\">\n                        </div>\n                        <div class=\"row row-group\">\n                            <div class=\"col content-group\">\n                                <div class=\"lable required\">CVC</div>\n                                <input class=\"field\" type=\"password\" autocomplete=\"new-password\" pattern=\"[0-9]*\"\n                                    inputmode=\"numeric\" card-cvc placeholder=\"xxx\" formControlName=\"cardCvc\"\n                                    (keyup)=\"keypress()\">\n                            </div>\n                            <div class=\"col content-group\">\n                                <div class=\"lable required\">Exp date</div>\n                                <input class=\"field\" type=\"tel\" autocomplete=\"cc-exp\" card-expiry\n                                    formControlName=\"expiry\" placeholder=\"MM / YY\" (keyup)=\"keypress()\">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"content-group\" style=\"margin-bottom: 0;\">\n                    <div class=\"lable required\">Email address</div>\n                    <input class=\"field\" formControlName=\"email\" type=\"email\" (keyup)=\"keypress()\">\n                    <div class=\"email-info\">This email will only be used to keep you updated about their payments</div>\n                </div>\n            </ng-container>\n        </form>\n    </div>\n    <div *ngIf=\"portalName == 'AcceptProposal'\">\n        <form [formGroup]=\"creditForm\" card container=\".card-container\" [card-width]=\"410\" [messages]=\"messages\"\n            [placeholders]=\"placeholders\" [masks]=\"masks\" [formatting]=\"formatting\" [debug]=\"debug\">\n            <div class=\"row\">\n                <div class=\"col-md-6 credit-card-hide\">\n                    <div class=\"card-container\">\n\n                    </div>\n                </div>\n                <div class=\"col-md-6\">\n                    <div class=\"content-group\">\n                        <div *ngIf=\"!companyNameSelected\" class=\"lable required\">Cardholder's name\n                        </div>\n                        <div *ngIf=\"companyNameSelected\" class=\"lable required\">Company name</div>\n                        <input class=\"field\" type=\"text\" card-name formControlName=\"cardName\" (keyup)=\"keypress()\">\n                        <div *ngIf=\"!companyNameSelected\" class=\"company-name-link\" (click)=\"companyNameClick()\">Or\n                            click here to use a company name</div>\n                        <div *ngIf=\"companyNameSelected\" class=\"company-name-link\" (click)=\"companyNameClick()\">Or click\n                            here to use your personal information</div>\n                    </div>\n                    <div class=\"content-group\">\n                        <div class=\"lable required\">Card number</div>\n                        <input class=\"field\" type=\"tel\" autocomplete=\"cc-number\" card-number\n                            formControlName=\"cardNumber\" maxlength=\"19\" placeholder=\"xxxx xxxx xxxx xxxx\"\n                            (keyup)=\"setCardType()\" [class.error_field]=\"!isCardNumberLength\">\n                        <img *ngIf=\"cardLogo\" class=\"icon-align\" src=\"{{cardImg}}\" (error)=\"defaultCard()\"\n                            alt=\"card name\">\n                    </div>\n                    <div class=\"row row-group\">\n                        <div class=\"col content-group\">\n                            <div class=\"lable required\">CVC</div>\n                            <input class=\"field\" type=\"password\" autocomplete=\"new-password\" pattern=\"[0-9]*\"\n                                inputmode=\"numeric\" card-cvc placeholder=\"xxx\" formControlName=\"cardCvc\"\n                                (keyup)=\"keypress()\">\n                        </div>\n                        <div class=\"col content-group\">\n                            <div class=\"lable required\">Exp date</div>\n                            <input class=\"field\" type=\"tel\" autocomplete=\"cc-exp\" card-expiry formControlName=\"expiry\"\n                                placeholder=\"MM / YY\" (keyup)=\"keypress()\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"content-group\" style=\"margin-bottom: 0;\">\n                <div class=\"lable required\">Email address</div>\n                <input class=\"field\" formControlName=\"email\" type=\"email\" (keyup)=\"keypress()\">\n                <div class=\"email-info\">This email will only be used to keep you updated about their payments</div>\n            </div>\n        </form>\n    </div>\n</div>", styles: [".content-group{margin:16px 0;font-size:14px}.content-group .vh{border-bottom:1px dashed var(--primaryBorderColor);margin:16px 0}.content-group select{cursor:pointer;appearance:none;background-color:#fff;border:1px solid var(--primaryBorderColor);border-radius:4px;padding:0 5px;color:var(--primaryTextColor)}.content-group select:focus-visible{outline:1px solid var(--inputHighlight)}.content-group .fa-angle-down{position:absolute;margin-left:-30px;margin-top:13px;color:var(--primaryTextColor)}.content-group .icon-align{width:20px;max-height:32px;margin-right:16px}.row-group{margin:-16px 0 0;grid-gap:24px;gap:24px}.row-group .col{padding:0}.col{padding:0}select{width:100%;height:40px}.icon-align{margin-top:4px;width:33px!important;height:-moz-fit-content!important;height:fit-content!important;position:absolute;margin-left:-49px;filter:invert(74%) sepia(2%) brightness(49%) contrast(80%)}.stored-icon-aligns{margin-top:4px;width:33px!important;height:-moz-fit-content!important;height:fit-content!important;position:absolute;margin-left:-49px;filter:invert(74%) sepia(2%) brightness(49%) contrast(80%);position:relative;left:56px;top:-38px}.lable{color:var(--primaryTextColor);padding-bottom:8px;font-family:\"Helvetica\";font-style:normal;font-weight:400;font-size:14px;line-height:24px}.field{width:100%;border:1px solid var(--primaryBorderColor);border-radius:4px;height:40px;padding:0 5px;color:var(--primaryTextColor);font-family:\"Helvetica\";font-style:normal;font-weight:400;font-size:14px;line-height:24px}.field:focus-visible{outline:1px solid var(--inputHighlight)}.error_field{border-color:var(--negativeButtonColours)}.error_field:focus-visible{outline:none}.company-name-link{padding-top:8px;color:var(--tertiaryButtonFontColour);cursor:pointer;font-family:\"Helvetica\";font-style:normal;font-weight:400;font-size:14px;line-height:20px;max-width:-moz-fit-content;max-width:fit-content}.email-info{color:var(--positiveFoundation);margin-top:8px;font-family:\"Helvetica\";font-style:normal;font-weight:400;font-size:14px;line-height:24px}.credit-card-hide{margin:auto}.card-container{margin-top:25px}::ng-deep .jp-card-name{font-size:16px!important}.invalid-input{margin-top:5px;color:#b94a48}@media (max-width: 857px){.card-container{transform:scale(.9)}}@media (max-width: 768px){.card-container{transform:scale(.89)}.content-group{margin:12px 0}}@media (max-width: 578px){.row-group{grid-gap:16px;gap:16px}}@media (max-width: 425px){.card-container{margin-bottom:12px;margin-top:0;margin-left:0;transform:scale(.8)!important}}@media (max-width: 380px){.card-container{margin-top:0;margin-left:0;margin-bottom:0;transform:scale(.8)!important}}@media (max-width: 320px){.card-container{margin-left:-20px;margin-top:0;margin-bottom:0;transform:scale(.65)!important}}\n"], directives: [{ type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i1.NgSelectOption, selector: "option", inputs: ["ngValue", "value"] }, { type: i1.ɵNgSelectMultipleOption, selector: "option", inputs: ["ngValue", "value"] }, { type: i3.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { type: i3.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i1.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i1.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i4.NgxCard, selector: "[card]", inputs: ["formatting", "debug", "messages", "placeholders", "container", "card-width", "masks"] }, { type: i1.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i1.FormGroupName, selector: "[formGroupName]", inputs: ["formGroupName"] }, { type: i1.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i5.NgxCardNameTemplate, selector: "[card-name]" }, { type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i1.FormControlName, selector: "[formControlName]", inputs: ["disabled", "formControlName", "ngModel"], outputs: ["ngModelChange"] }, { type: i5.NgxCardNumberTemplate, selector: "[card-number]" }, { type: i1.MaxLengthValidator, selector: "[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]", inputs: ["maxlength"] }, { type: i1.PatternValidator, selector: "[pattern][formControlName],[pattern][formControl],[pattern][ngModel]", inputs: ["pattern"] }, { type: i5.NgxCardCvcTemplate, selector: "[card-cvc]" }, { type: i5.NgxCardExpiryTemplate, selector: "[card-expiry]" }], pipes: { "slice": i3.SlicePipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: PaymentCardDetailsComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'lib-payment-card-details',
                    templateUrl: './payment-card-details.component.html',
                    styleUrls: ['./payment-card-details.component.scss']
                }]
        }], ctorParameters: function () { return [{ type: i1.FormBuilder }, { type: i2.CommonPaymentService }]; }, propDecorators: { payEmitter: [{
                type: Output
            }], cardPaymentData: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF5bWVudC1jYXJkLWRldGFpbHMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvcGFyZW50cGF5bWVudC9zcmMvbGliL3BheW1lbnQtZGV0YWlscy9wYXltZW50LWNhcmQtZGV0YWlscy9wYXltZW50LWNhcmQtZGV0YWlscy5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9wYXJlbnRwYXltZW50L3NyYy9saWIvcGF5bWVudC1kZXRhaWxzL3BheW1lbnQtY2FyZC1kZXRhaWxzL3BheW1lbnQtY2FyZC1kZXRhaWxzLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDL0UsT0FBTyxFQUF1QyxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNqRixPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQzs7Ozs7OztBQVExRCxNQUFNLE9BQU8sMkJBQTJCO0lBNEJwQyxZQUNRLEVBQWUsRUFDZixvQkFBMEM7O1FBRDFDLE9BQUUsR0FBRixFQUFFLENBQWE7UUFDZix5QkFBb0IsR0FBcEIsb0JBQW9CLENBQXNCO1FBNUIxQyxlQUFVLEdBQXFCLElBQUksWUFBWSxFQUFPLENBQUM7UUFHakUsZ0JBQVcsR0FBTSxFQUFFLENBQUM7UUFDcEIsYUFBUSxHQUFNLEVBQUUsQ0FBQztRQUlqQixTQUFJLEdBQVMsS0FBSyxDQUFDO1FBRW5CLGNBQVMsR0FBVyxHQUFHLENBQUM7UUFDeEIsYUFBUSxHQUFRLEVBQUMsU0FBUyxFQUFFLGFBQWEsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBRSx5QkFBeUI7UUFDMUYsaUJBQVksR0FBUSxFQUFDLE1BQU0sRUFBRSxxQkFBcUIsRUFBRSxJQUFJLEVB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QUM7UUFDeEMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ2QsQ0FBQztJQUVELGNBQWMsQ0FBQyxNQUFhO1FBQzFCLElBQUksRUFBRSxHQUFRO1lBQ1YsUUFBUSxFQUFFLDZDQUE2QztZQUN2RCxPQUFPLEVBQUUsb0VBQW9FO1lBQzdFLE9BQU8sRUFBRSxhQUFhO1lBQ3RCLFlBQVksRUFBRSxZQUFZO1lBQzFCLFFBQVEsRUFBRSxjQUFjO1lBQ3hCLE1BQU0sRUFBRSwyQkFBMkI7WUFDbkMsWUFBWSxFQUFFLG1CQUFtQjtZQUNqQyxrQkFBa0IsRUFBRSxrQkFBa0I7WUFDdEMsTUFBTSxFQUFFLGtDQUFrQztZQUMxQyxRQUFRLEVBQUUsK0JBQStCO1lBQ3pDLEdBQUcsRUFBRSwrQkFBK0I7U0FDdkMsQ0FBQTtRQUVELEtBQUksSUFBSSxHQUFHLElBQUksRUFBRSxFQUFFO1lBQ2YsSUFBRyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUN2QixPQUFPLEdBQUcsQ0FBQTthQUNYO1NBQ0o7UUFDRCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7O3lIQXBQWSwyQkFBMkI7NkdBQTNCLDJCQUEyQix1SkNWeEMsd3pRQWlJTTs0RkR2SE8sMkJBQTJCO2tCQUx2QyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSwwQkFBMEI7b0JBQ3BDLFdBQVcsRUFBRSx1Q0FBdUM7b0JBQ3BELFNBQVMsRUFBRSxDQUFDLHVDQUF1QyxDQUFDO2lCQUNyRDtxSUFHVyxVQUFVO3NCQUFuQixNQUFNO2dCQUtFLGVBQWU7c0JBQXZCLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCAsSW5wdXQgLE91dHB1dCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3JtQnVpbGRlciwgRm9ybUNvbnRyb2wsIEZvcm1Hcm91cCwgVmFsaWRhdG9ycyB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IENyZWRpdENhcmRWYWxpZGF0b3JzIH0gZnJvbSAnYW5ndWxhci1jYy1saWJyYXJ5JztcbmltcG9ydCB7IENvbW1vblBheW1lbnRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VyaXZjZXMvY29tbW9uLXBheW1lbnQuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2xpYi1wYXltZW50LWNhcmQtZGV0YWlscycsXG4gIHRlbXBsYXRlVXJsOiAnLi9wYXltZW50LWNhcmQtZGV0YWlscy5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3BheW1lbnQtY2FyZC1kZXRhaWxzLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgUGF5bWVudENhcmREZXRhaWxzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBAT3V0cHV0KCkgcGF5RW1pdHRlcjpFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIHVzZXJEYXRhOiBhbnk7XG4gIHN0b3JlZENhcmRzOiBhbnk9W107XG4gIGNhcmRUeXBlOiBhbnk9Jyc7XG4gIEBJbnB1dCgpIGNhcmRQYXltZW50RGF0YTphbnk7XG4gIC8vIEBJbnB1dCgpIHN0b3JlZENhcmRzOmFueTtcbiAgY2FyZFNlbGVjdGVkVHlwZTogYW55O1xuICBjYXJkOmJvb2xlYW49ZmFsc2U7XG4gIGNvbnRhaW5lcjogYW55O1xuICBjYXJkd2lkdGg6IE51bWJlciA9IDM1MDtcbiAgbWVzc2FnZXM6IGFueSA9IHt2YWxpZERhdGU6ICd2YWxpZFxcbmRhdGUnLCBtb250aFllYXI6ICdtbS95eSd9OyAgLy9TdHJpbmdzIGZvciB0cmFuc2xhdGlvblxuICBwbGFjZWhvbGRlcnM6IGFueSA9IHtudW1iZXI6ICfigKLigKLigKLigKIg4oCi4oCi4oCi4oCiIOKAouKAouKAouKAoiDigKLigKLigKLigKInLCBuYW1lOiAnRnVsbCBOYW1lJywgZXhwaXJ5OiAn4oCi4oCiL+KAouKAoicsIGN2YzogJ+KAouKAouKAoid9IC8vIFBsYWNlaG9sZGVycyBmb3IgcmVuZGVyZWQgZmllbGRzXG4gIG1hc2tzOiBhbnk7XG4gIGZvcm1hdHRpbmc6IGJvb2xlYW4gPSB0cnVlO1xuICBkZWJ1ZzogYm9vbGVhbiA9IHRydWU7IC8vIElmIHRydWUsIHdpbGwgbG9nIGhlbHBmdWwgbWVzc2FnZXMgZm9yIHNldHRpbmcgdXAgQ2FyZFxuICBjcmVkaXRGb3JtITogRm9ybUdyb3VwO1xuICBzdW1tYXJ5OiBhbnk7XG4gIGNvbXBhbnlOYW1lU2VsZWN0ZWQ6Ym9vbGVhbj1mYWxzZTtcbiAgaXNDYXJkTnVtYmVyTGVuZ3RoOiBib29sZWFuPXRydWU7XG4gIGNhcmRMb2dvOiBhbnk9Jyc7XG4gIGNhcmRJbWc6IHN0cmluZyA9IFwiXCI7XG4gIHN0b3JlZENhcmREYXRhOmFueTtcbiAgcGF5bWVudFN0b3JlZERldGlhbHM6YW55O1xuICBwb3J0YWxOYW1lOmFueTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZmI6IEZvcm1CdWlsZGVyLFxuICAgIHByaXZhdGUgY29tbW9tUGF5bWVudFNlcnZpY2U6IENvbW1vblBheW1lbnRTZXJ2aWNlXG4gICkgeyB0aGlzLmNhcmRQYXltZW50RGF0YSA9IHRoaXMuY2FyZFBheW1lbnREYXRhO1xuICAgIHRoaXMuY29tbW9tUGF5bWVudFNlcnZpY2UucGF5bWVudERldGFpbHMkLnN1YnNjcmliZSgocmVzcG9uc2U6YW55KT0+e1xuICAgICAgdGhpcy5jYXJkUGF5bWVudERhdGEgPSByZXNwb25zZTtcbiAgICB9KVxuICAgIHRoaXMucG9ydGFsTmFtZSA9IHRoaXMuY29tbW9tUGF5bWVudFNlcnZpY2UuYXBpVXJsPy5wb3J0YWw7XG4gICAgaWYodGhpcy5wb3J0YWxOYW1lID09ICdTdGF0ZW1lbnRQb3J0YWwnIHx8IHRoaXMucG9ydGFsTmFtZSA9PSdJbnZvaWNlUG9ydGFsJyl7XG4gICAgICB0aGlzLmNhcmQgPSB0cnVlO1xuICAgIH1lbHNle1xuICAgICAgdGhpcy5jYXJkID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuYnVpbGRDcmVkaXRGb3JtUygpO31cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgXG4gICAgdGhpcy5wYXlFbWl0dGVyLmVtaXQodHJ1ZSk7XG5cbiAgICBsZXQgaW52b2ljZUFkZHJlc3Nlc0lkID0gdGhpcy5jYXJkUGF5bWVudERhdGEuaW52b2ljZURldGFpbHM/Lmludm9pY2VBZGRyZXNzSWQgPyB0aGlzLmNhcmRQYXltZW50RGF0YS5pbnZvaWNlRGV0YWlscy5pbnZvaWNlQWRkcmVzc0lkIDogdGhpcy5jYXJkUGF5bWVudERhdGEuaW52b2ljZUFkZHJlc3NObztcbiAgICB0aGlzLnBvcnRhbE5hbWUgPSB0aGlzLmNvbW1vbVBheW1lbnRTZXJ2aWNlLmFwaVVybD8ucG9ydGFsO1xuICAgIHRoaXMuY29tbW9tUGF5bWVudFNlcnZpY2UucGF5bWVudFN0b3JlZENhcmQkLnN1YnNjcmliZSgoc3RvcmVkOmFueSk9PntcbiAgICAgIHRoaXMucGF5bWVudFN0b3JlZERldGlhbHMgPSBzdG9yZWQ7XG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coJ2ludmFkZHJlc3MwJyx0aGlzLnBheW1lbnRTdG9yZWREZXRpYWxzKTtcbiAgICBjb25zb2xlLmxvZygnY2FyZHBheW1lbnRkZXRhbCcsdGhpcy5jYXJkUGF5bWVudERhdGEpO1xuICAgIGlmKHRoaXMuY29tbW9tUGF5bWVudFNlcnZpY2UuYXBpVXJsPy5hcGlVcmwgIT0gJycpe1xuICAgICAgaWYodGhpcy5wYXltZW50U3RvcmVkRGV0aWFscyA9PSBudWxsIHx8IHRoaXMucGF5bWVudFN0b3JlZERldGlhbHMgPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgdGhpcy5jb21tb21QYXltZW50U2VydmljZS5nZXRTdG9yZWNhcmQoaW52b2ljZUFkZHJlc3Nlc0lkKS5zdWJzY3JpYmUoKHJlczphbnkpPT57XG4gICAgICAgICAgaWYocmVzICYmIHJlcy5yZWNvcmRzKXtcbiAgICAgICAgICAgIHRoaXMuc3RvcmVkQ2FyZHMgPSByZXMucmVjb3JkcztcbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHRoaXMuc3RvcmVkQ2FyZHMgPSByZXM7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuY29tbW9tUGF5bWVudFNlcnZpY2Uuc2V0UGF5bWVudFN0b3JlZENhcmQodGhpcy5zdG9yZWRDYXJkcyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2NhcmREZXRhaWxzJyx0aGlzLnN0b3JlZENhcmRzKTtcbiAgICAgICAgfSk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgdGhpcy5zdG9yZWRDYXJkcyA9IHRoaXMucGF5bWVudFN0b3JlZERldGlhbHM7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjYXJkRGV0YWlsc2FmdGVyJyx0aGlzLnN0b3JlZENhcmRzKTtcbiAgICAgIH0gXG4gICAgfVxuXG4gIH1cblxuXG4gIGRyb3Bkb3duKHZhbDphbnkpe1xuICAgIHRoaXMuY2FyZCA9ZmFsc2U7XG4gICAgdGhpcy5wYXlFbWl0dGVyLmVtaXQoZmFsc2UpO1xuICAgIGlmKHZhbC52YWx1ZSA9PSAnU2V0IHVwIG5ldyBkZWJpdCBvciBjcmVkaXQgY2FyZCcpe1xuICAgICAgdGhpcy5jYXJkID0gdHJ1ZTtcbiAgICAgIGlmKHRoaXMucG9ydGFsTmFtZSAhPSAnQWNjZXB0UHJvcG9zYWwnKXtcbiAgICAgICAgdGhpcy5idWlsZENyZWRpdEZvcm1zKCk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgdGhpcy5idWlsZENyZWRpdEZvcm1TKCk7XG4gICAgICB9XG4gICAgfWVsc2V7XG4gICAgICAgIGlmKHRoaXMuc3RvcmVkQ2FyZHMuc3RvcmVkQ2FyZERldGFpbHMubGVuZ3RoID09IDEpe1xuICAgICAgICAgIHRoaXMuY2FyZFNlbGVjdGVkKHRoaXMuc3RvcmVkQ2FyZHMuc3RvcmVkQ2FyZERldGFpbHNbMF0uaWQsJ3RzJylcbiAgICAgICAgfVxuICAgICAgdGhpcy5jYXJkID0gZmFsc2U7XG4gICAgfVxuICAgIC8vIHRoaXMudHJhbnNsYXRlLmdldChcIlVzZSBleGlzdGluZyBjcmVkaXQgY2FyZFwiKS5zdWJzY3JpYmUodHJhbnNsYXRpb25zID0+IHtcbiAgICAvLyAgIGlmKHZhbC52YWx1ZT09IHRyYW5zbGF0aW9ucyl7XG4gICAgLy8gICAgIHRoaXMuY2FyZD10cnVlXG4gICAgLy8gICAgIGlmKHRoaXMuc3RvcmVkQ2FyZHMubGVuZ3RoID09IDEpe1xuICAgIC8vICAgICAgIHRoaXMuY2FyZFNlbGVjdGVkKHRoaXMuc3RvcmVkQ2FyZHNbMF0uaWQsJ3RzJylcbiAgICAvLyAgICAgfVxuICAgIC8vICAgfVxuICAgIC8vICAgZWxzZXtcbiAgICAvLyAgICAgdGhpcy5jYXJkPWZhbHNlXG4gICAgLy8gICAgIHRoaXMuYnVpbGRDcmVkaXRGb3JtcygpXG4gICAgLy8gICB9XG4gICAgLy8gfSlcblxuICB9XG5cbiAgYnVpbGRDcmVkaXRGb3Jtcygpe1xuICAgIGxldCBkYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICBsZXQgaW52b2ljZU5vO1xuICAgIGlmKHRoaXMuY2FyZFBheW1lbnREYXRhLmludm9pY2VEZXRhaWxzPy5pbnZvaWNlTnVtYmVyKXtcbiAgICAgIGludm9pY2VObyA9IHRoaXMuY2FyZFBheW1lbnREYXRhLmludm9pY2VEZXRhaWxzPy5pbnZvaWNlTnVtYmVyID8gXCJJbnZvaWNlIG5vIDogXCIrdGhpcy5jYXJkUGF5bWVudERhdGEuaW52b2ljZURldGFpbHMuaW52b2ljZU51bWJlciA6ICcnO1xuICAgIH1lbHNle1xuICAgICAgaW52b2ljZU5vID0gJ09wcG9ydHVuaXR5IG5vOiAnICsgdGhpcy5jYXJkUGF5bWVudERhdGEub3Bwb3J0dW5pdHlJZFxuICAgIH1cbiAgICBsZXQgcGF5bWVudElkO1xuICAgIGlmKHRoaXMuY2FyZFBheW1lbnREYXRhPy5jYXJkQ2hhcmdlcy5sZW5ndGggIT0gMCl7XG4gICAgICBwYXltZW50SWQgPSB0aGlzLmNhcmRQYXltZW50RGF0YS5jYXJkQ2hhcmdlc1t0aGlzLmNvbW1vbVBheW1lbnRTZXJ2aWNlLmNhcmRDaGFyZ2VzXS5wYXltZW50TWV0aG9kSWRcbiAgICB9XG4gICAgdGhpcy5jcmVkaXRGb3JtID0gdGhpcy5mYi5ncm91cCh7XG4gICAgICBwYXltZW50OiB0aGlzLmZiLmdyb3VwKHtcbiAgICAgICdjYXJkQ2hhcmdlJzogW3RoaXMuY2FyZFBheW1lbnREYXRhPy5jYXJkQ2hhcmdlc1swXS5jaGFyZ2UgPyB0aGlzLmNhcmRQYXltZW50RGF0YS5jYXJkQ2hhcmdlc1swXS5jaGFyZ2UgOiB0aGlzLmNhcmRQYXltZW50RGF0YS5wYXltZW50Q2hhcmdlWzBdLmNoYXJnZSBdLC8vaW5kZXggVUkgbmVlZGVkXG4gICAgICAnY2FyZE5hbWUnOiBbdGhpcy5jYXJkUGF5bWVudERhdGE/LmN1c3RvbWVyRGV0YWlscz8uY3VzdG9tZXJOYW1lID8gdGhpcy5jYXJkUGF5bWVudERhdGEuY3VzdG9tZXJEZXRhaWxzLmN1c3RvbWVyTmFtZSA6IHRoaXMuY2FyZFBheW1lbnREYXRhLmN1c3RvbWVyTmFtZSwgW1ZhbGlkYXRvcnMucmVxdWlyZWRdIF0sXG4gICAgICAnY2FyZE51bWJlcic6IFsnJywgW1ZhbGlkYXRvcnMucmVxdWlyZWQsIENyZWRpdENhcmRWYWxpZGF0b3JzLnZhbGlkYXRlQ0NOdW1iZXJdXSxcbiAgICAgICdjYXJkQ3ZjJzogWycnLCBbVmFsaWRhdG9ycy5yZXF1aXJlZCwgVmFsaWRhdG9ycy5taW5MZW5ndGgoMyksIFZhbGlkYXRvcnMubWF4TGVuZ3RoKDQpXV0sXG4gICAgICAncGF5bWVudERhdGUnOiBbZGF0ZV0sXG4gICAgICAnZGVzY3JpcHRpb24nOiBbaW52b2ljZU5vXSxcbiAgICAgICdpc3BvcnRhbCc6IFt0cnVlIF0sXG4gICAgICAncmVmZXJlbmNlJzogW2ludm9pY2VObyBdLFxuICAgICAgJ2VtYWlsJzogW3RoaXMuY2FyZFBheW1lbnREYXRhPy5jdXN0b21lckRldGFpbHM/LmVtYWlsSWQgPyB0aGlzLmNhcmRQYXltZW50RGF0YS5jdXN0b21lckRldGFpbHMuZW1haWxJZCA6ICcnLFtWYWxpZGF0b3JzLnJlcXVpcmVkLCBWYWxpZGF0b3JzLmVtYWlsXV0sXG4gICAgICAnZXhwaXJ5JzogWycnLCBbVmFsaWRhdG9ycy5yZXF1aXJlZCwgQ3JlZGl0Q2FyZFZhbGlkYXRvcnMudmFsaWRhdGVFeHBEYXRlXV0sXG4gICAgICBcInBheW1lbnRNZXRob2RcIjpbcGF5bWVudElkID8gcGF5bWVudElkIDogJyddLFxuICAgICAgXCJkb250U2VuZFRvQWNjb3VudHNcIjpbJyddLFxuICAgICAgfSlcblxuICAgIH0pO1xuICAgIHRoaXMucGxhY2Vob2xkZXJzID0ge25hbWU6IHRoaXMuY2FyZFBheW1lbnREYXRhPy5jdXN0b21lckRldGFpbHM/LmN1c3RvbWVyTmFtZSA/IHRoaXMuY2FyZFBheW1lbnREYXRhLmN1c3RvbWVyRGV0YWlscy5jdXN0b21lck5hbWU6J0Z1bGwgTmFtZSd9O1xuICB9XG5cbiAgYnVpbGRDcmVkaXRGb3JtUygpe1xuICAgIGxldCBkYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICBsZXQgaW52b2ljZU5vO1xuICAgIGlmKHRoaXMuY2FyZFBheW1lbnREYXRhPy5pbnZvaWNlRGV0YWlscz8uaW52b2ljZU51bWJlcil7XG4gICAgICBpbnZvaWNlTm8gPSB0aGlzLmNhcmRQYXltZW50RGF0YT8uaW52b2ljZURldGFpbHM/Lmludm9pY2VOdW1iZXIgPyBcIkludm9pY2Ugbm8gOiBcIit0aGlzLmNhcmRQYXltZW50RGF0YS5pbnZvaWNlRGV0YWlscy5pbnZvaWNlTnVtYmVyIDogJyc7XG4gICAgfWVsc2V7XG4gICAgICBpbnZvaWNlTm8gPSAnT3Bwb3J0dW5pdHkgbm86ICcgKyB0aGlzLmNhcmRQYXltZW50RGF0YS5vcHBvcnR1bml0eUlkXG4gICAgfVxuXG4gICAgdGhpcy5jcmVkaXRGb3JtID0gdGhpcy5mYi5ncm91cCh7XG4gICAgICAnYW1vdW50JzogW3RoaXMuY2FyZFBheW1lbnREYXRhPy5zaG93RGVwb3NpdCA/IHRoaXMuY2FyZFBheW1lbnREYXRhPy5zaG93RGVwb3NpdCA6ICcnXSxcbiAgICAgICdjYXJkQ2hhcmdlJzogWzAgXSwvL2luZGV4IFVJIG5lZWRlZFxuICAgICAgJ2NhcmROYW1lJzogW3RoaXMuY2FyZFBheW1lbnREYXRhPy5jdXN0b21lckRldGFpbHM/LmN1c3RvbWVyTmFtZSA/IHRoaXMuY2FyZFBheW1lbnREYXRhLmN1c3RvbWVyRGV0YWlscy5jdXN0b21lck5hbWUgOiB0aGlzLmNhcmRQYXltZW50RGF0YT8uY3VzdG9tZXJOYW1lLCBbVmFsaWRhdG9ycy5yZXF1aXJlZF0gXSxcbiAgICAgICdjYXJkTnVtYmVyJzogWycnLCBbVmFsaWRhdG9ycy5yZXF1aXJlZCwgQ3JlZGl0Q2FyZFZhbGlkYXRvcnMudmFsaWRhdGVDQ051bWJlcl1dLFxuICAgICAgJ2NhcmRDdmMnOiBbJycsIFtWYWxpZGF0b3JzLnJlcXVpcmVkLCBWYWxpZGF0b3JzLm1pbkxlbmd0aCgzKSwgVmFsaWRhdG9ycy5tYXhMZW5ndGgoNCldXSxcbiAgICAgICdjYXJkQWRkcmVzc0xpbmUxJzogWycnLCBdLFxuICAgICAgJ2NhcmRBZGRyZXNzTGluZTInOiBbJycsIF0sXG4gICAgICAnY2FyZEFkZHJlc3NMaW5lMyc6IFsnJywgXSxcbiAgICAgICdjYXJkVG93bic6IFsnJyxdLFxuICAgICAgJ2NhcmRUeXBlJzogWycnLCBdLFxuICAgICAgJ2NhcmRDb3VudHknOiBbJycsIF0sXG4gICAgICAnY2FyZFBvc3RDb2RlJzogWycnLCBdLFxuICAgICAgJ3BheW1lbnREYXRlJzogW2RhdGVdLFxuICAgICAgJ2Rlc2NyaXB0aW9uJzogW2ludm9pY2VOb10sXG4gICAgICAnaXNwb3J0YWwnOiBbdHJ1ZSBdLFxuICAgICAgJ2VtYWlsJzogW3RoaXMuY2FyZFBheW1lbnREYXRhPy5jdXN0b21lckRldGFpbHM/LmVtYWlsSWQgPyB0aGlzLmNhcmRQYXltZW50RGF0YS5jdXN0b21lckRldGFpbHMuZW1haWxJZCA6ICcnLFtWYWxpZGF0b3JzLnJlcXVpcmVkLCBWYWxpZGF0b3JzLmVtYWlsXV0sXG4gICAgICAnZXhwaXJ5JzogWycnLCBbVmFsaWRhdG9ycy5yZXF1aXJlZCwgQ3JlZGl0Q2FyZFZhbGlkYXRvcnMudmFsaWRhdGVFeHBEYXRlXV0sXG4gICAgICAnc3RvcmVkQ2FyZCc6IFswLCBdLFxuICAgICAgJ3NhdmVDYXJkJzogW3RydWUsIF0sXG4gICAgICBcImRvbnRTZW5kVG9BY2NvdW50c1wiOlsnJ10sXG4gICAgfSk7XG4gICAgdGhpcy5wbGFjZWhvbGRlcnMgPSB7bmFtZTogdGhpcy5jYXJkUGF5bWVudERhdGE/LmN1c3RvbWVyRGV0YWlscz8uY3VzdG9tZXJOYW1lID8gdGhpcy5jYXJkUGF5bWVudERhdGEuY3VzdG9tZXJEZXRhaWxzLmN1c3RvbWVyTmFtZTonRnVsbCBOYW1lJ307XG4gIH1cblxuICBjb21wYW55TmFtZUNsaWNrKCl7XG4gICAgdGhpcy5jb21wYW55TmFtZVNlbGVjdGVkPSF0aGlzLmNvbXBhbnlOYW1lU2VsZWN0ZWQ7XG4gICAgdGhpcy5jcmVkaXRGb3JtLnBhdGNoVmFsdWUoeydwYXltZW50Jzp7J2NhcmROYW1lJzonJ319KTtcbiAgfVxuICBrZXlwcmVzcygpe1xuICAgIHRoaXMucGF5RW1pdHRlci5lbWl0KHRoaXMuY3JlZGl0Rm9ybSk7XG4gIH1cbiAgc2V0Q2FyZFR5cGUoKXtcbiAgICB0aGlzLmNhcmRMb2dvPXRoaXMuZGV0ZWN0Q2FyZFR5cGUodGhpcy5jcmVkaXRGb3JtLnZhbHVlLnBheW1lbnQuY2FyZE51bWJlci5yZXBsYWNlKC9cXHMvZywgXCJcIikpXG4gICAgdmFyIGNhcmRTdGF0dXMgPSB0aGlzLmNyZWRpdEZvcm0uZ2V0KCdwYXltZW50LmNhcmROdW1iZXInKVxuICAgIGlmKHRoaXMuaXNDYXJkTnVtYmVyTGVuZ3RoICYmIGNhcmRTdGF0dXM/LnN0YXR1cyA9PSBcIklOVkFMSURcIil0aGlzLmlzQ2FyZE51bWJlckxlbmd0aD1mYWxzZTtcbiAgICBpZighdGhpcy5pc0NhcmROdW1iZXJMZW5ndGggJiYgY2FyZFN0YXR1cz8uc3RhdHVzID09IFwiVkFMSURcIil0aGlzLmlzQ2FyZE51bWJlckxlbmd0aD10cnVlO1xuICAgIHRoaXMucGF5RW1pdHRlci5lbWl0KHRoaXMuY3JlZGl0Rm9ybSk7XG4gICAgdGhpcy5jYXJkSW1nID0gXCJhc3NldHMvcGF5bWVudFR5cGUvXCIrdGhpcy5jYXJkTG9nbytcIi5zdmdcIlxuICB9XG4gIGRlZmF1bHRDYXJkKCl7XG4gICAgdGhpcy5jYXJkSW1nID0gXCJhc3NldHMvcGF5bWVudFR5cGUvY2FyZC5zdmdcIlxuICB9XG4gIGVycm9ySGFuZGxlcigpIHtcbiAgICB0aGlzLmNhcmRMb2dvID0gJ2NhcmQnO1xuIH1cbiAgY2FyZFNlbGVjdGVkKHZhbDphbnksZnJvbTpzdHJpbmcpe1xuICAgIGlmKGZyb209PSdodG1sJyl7XG4gICAgICB2YWw9dmFsLnZhbHVlXG4gICAgfVxuICAgIHRoaXMuY2FyZFNlbGVjdGVkVHlwZSA9IGZyb207XG4gICAgdGhpcy5jYXJkVHlwZT12YWwudG9TdHJpbmcoKTtcblxuICAgIHZhciBpbnRBcnIgPSB0aGlzLmNhcmRUeXBlLnNwbGl0KFwiLFwiKTtcbiAgICBpbnRBcnIuZm9yRWFjaCgoZWxlbWVudDphbnkpID0+IHtcbiAgICAgIGNvbnN0IHRhZ3NEYXRhID0gdGhpcy5zdG9yZWRDYXJkcy5zdG9yZWRDYXJkRGV0YWlscy5maW5kKCh4OmFueSkgPT4geFsnaWQnXSA9PSBlbGVtZW50KTtcbiAgICAgIHRoaXMuY2FyZExvZ28gPSB0YWdzRGF0YS5jYXJkX3R5cGU7XG4gICAgfSk7XG5cbiAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgbGV0IGludm9pY2VOdW1iZXIgPSB0aGlzLmNhcmRQYXltZW50RGF0YS5pbnZvaWNlRGV0YWlscz8uaW52b2ljZU51bWJlciA/IFwiSW52b2ljZSBubyA6ICNcIit0aGlzLmNhcmRQYXltZW50RGF0YS5pbnZvaWNlRGV0YWlscy5pbnZvaWNlTnVtYmVyIDogJyc7XG4gICAgdGhpcy5jcmVkaXRGb3JtID0gdGhpcy5mYi5ncm91cCh7XG4gICAgICAgICdwYXltZW50RGF0ZScgOiBbZGF0ZSwgW1ZhbGlkYXRvcnMucmVxdWlyZWRdIF0sXG4gICAgICAgICdkZXNjcmlwdGlvbicgOiBbaW52b2ljZU51bWJlcl0sXG4gICAgICAgICdyZWZlcmVuY2UnIDogW2ludm9pY2VOdW1iZXIgXSxcbiAgICAgICAgJ3BheW1lbnRNZXRob2QnIDogW3RoaXMuY2FyZFBheW1lbnREYXRhLmNhcmRDaGFyZ2VzW3RoaXMuY29tbW9tUGF5bWVudFNlcnZpY2UuY2FyZENoYXJnZXNdLnBheW1lbnRNZXRob2RJZCwgW1ZhbGlkYXRvcnMucmVxdWlyZWRdXSxcbiAgICAgICAgJ3N0b3JlZENhcmQnIDogW3ZhbCwgW1ZhbGlkYXRvcnMucmVxdWlyZWRdXSxcbiAgICAgICAgJ2NhcmROYW1lJyA6IFt0aGlzLmNhcmRQYXltZW50RGF0YS5jdXN0b21lckRldGFpbHMuY3VzdG9tZXJOYW1lLCBbVmFsaWRhdG9ycy5yZXF1aXJlZF1dLFxuICAgICAgICAnYW1vdW50JyA6IFtdLFxuICAgICAgICAnY2FyZENoYXJnZScgOiBbdGhpcy5jYXJkUGF5bWVudERhdGEuY2FyZENoYXJnZXNbdGhpcy5jb21tb21QYXltZW50U2VydmljZS5jYXJkQ2hhcmdlc10uY2hhcmdlLCBdLFxuICAgICAgICAnaXNQb3J0YWwnIDogW3RydWVdLFxuICAgICAgfSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5wYXlFbWl0dGVyLmVtaXQodGhpcy5jcmVkaXRGb3JtKTtcbiAgICAgIH0sIDEwMCk7XG59XG5cbmRldGVjdENhcmRUeXBlKG51bWJlcjpudW1iZXIpIHtcbiAgdmFyIHJlIDphbnkgPSB7XG4gICAgICBlbGVjdHJvbjogL14oNDAyNnw0MTc1MDB8NDQwNXw0NTA4fDQ4NDR8NDkxM3w0OTE3KVxcZCskLyxcbiAgICAgIG1hZXN0cm86IC9eKDUwMTh8NTAyMHw1MDM4fDU2MTJ8NTg5M3w2MzA0fDY3NTl8Njc2MXw2NzYyfDY3NjN8MDYwNHw2MzkwKVxcZCskLyxcbiAgICAgIGRhbmtvcnQ6IC9eKDUwMTkpXFxkKyQvLFxuICAgICAgaW50ZXJwYXltZW50OiAvXig2MzYpXFxkKyQvLFxuICAgICAgdW5pb25wYXk6IC9eKDYyfDg4KVxcZCskLyxcbiAgICAgICdWaXNhJzogL140WzAtOV17MTJ9KD86WzAtOV17M30pPyQvLFxuICAgICAgJ01hc3RlckNhcmQnOiAvXjVbMS01XVswLTldezE0fSQvLFxuICAgICAgJ0FtZXJpY2FuIEV4cHJlc3MnOiAvXjNbNDddWzAtOV17MTN9JC8sXG4gICAgICBkaW5lcnM6IC9eMyg/OjBbMC01XXxbNjhdWzAtOV0pWzAtOV17MTF9JC8sXG4gICAgICBkaXNjb3ZlcjogL142KD86MDExfDVbMC05XXsyfSlbMC05XXsxMn0kLyxcbiAgICAgIGpjYjogL14oPzoyMTMxfDE4MDB8MzVcXGR7M30pXFxkezExfSQvXG4gIH1cblxuICBmb3IodmFyIGtleSBpbiByZSkge1xuICAgICAgaWYocmVba2V5XS50ZXN0KG51bWJlcikpIHtcbiAgICAgICAgcmV0dXJuIGtleVxuICAgICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG59XG4iLCI8ZGl2IGNsYXNzPVwiY29udGVudC1ncm91cFwiICpuZ0lmPVwic3RvcmVkQ2FyZHMubGVuZ3RoICE9IDBcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY29udGVudC1ncm91cFwiIHN0eWxlPVwibWFyZ2luLWJvdHRvbTotMTZweFwiICpuZ0lmPVwicG9ydGFsTmFtZSAhPSAnQWNjZXB0UHJvcG9zYWwnXCI+XG4gICAgICAgIDxzZWxlY3QgKGNoYW5nZSk9XCJkcm9wZG93bigkZXZlbnQudGFyZ2V0KVwiPlxuICAgICAgICAgICAgPG9wdGlvbj5Vc2UgZXhpc3RpbmcgY3JlZGl0IGNhcmQ8L29wdGlvbj5cbiAgICAgICAgICAgIDxvcHRpb24+U2V0IHVwIG5ldyBkZWJpdCBvciBjcmVkaXQgY2FyZDwvb3B0aW9uPlxuICAgICAgICA8L3NlbGVjdD48aSBjbGFzcz1cImZhLXNvbGlkIGZhLWFuZ2xlLWRvd25cIj48L2k+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2aFwiPjwvZGl2PlxuICAgIDwvZGl2PlxuPC9kaXY+XG5cbjxkaXYgKm5nSWY9XCJjYXJkXCI+XG4gICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtZ3JvdXAgZ3JvdXAtY2FyZFwiIHN0eWxlPVwibWFyZ2luLXRvcDozMnB4O21hcmdpbi1ib3R0b206IDA7XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJsYWJsZVwiPlNlbGVjdCBjYXJkPC9kaXY+XG4gICAgICAgIDxzZWxlY3QgKHNlbGVjdGVkKT1cImNhcmRTZWxlY3RlZCgkZXZlbnQudGFyZ2V0LCdodG1sJylcIlxuICAgICAgICAgICAgW25nU3R5bGVdPVwieydwYWRkaW5nLWxlZnQnOiBjYXJkU2VsZWN0ZWRUeXBlID09ICdodG1sJyB8fCBjYXJkU2VsZWN0ZWRUeXBlID09ICd0cycgID8gJzQ2cHgnIDogJycgfVwiPlxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiIGRpc2FibGVkIHNlbGVjdGVkIGhpZGRlbj5QbGVhc2Ugc2VsZWN0PC9vcHRpb24+XG4gICAgICAgICAgICA8b3B0aW9uICpuZ0Zvcj1cImxldCBjYXJkIG9mIHN0b3JlZENhcmRzLnN0b3JlZENhcmREZXRhaWxzXCJcbiAgICAgICAgICAgICAgICBbc2VsZWN0ZWRdPVwic3RvcmVkQ2FyZHMuc3RvcmVkQ2FyZERldGFpbHMubGVuZ3RoID09IDFcIiBbdmFsdWVdPVwiY2FyZC5pZFwiPjxzcGFuXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiY2FyZERlc2NyaXB0aW9uXCI+WFhYWCAtIFhYWFggLSBYWFhYIC1cbiAgICAgICAgICAgICAgICAgICAge3tjYXJkLmRlc2NyaXB0aW9uLnN1YnN0cmluZyhjYXJkLmRlc2NyaXB0aW9uLmluZGV4T2YoJ3dpdGgnKSArIDQpfCBzbGljZTowOjUgfX08L3NwYW4+PC9vcHRpb24+XG4gICAgICAgIDwvc2VsZWN0PjxpIGNsYXNzPVwiZmEtc29saWQgZmEtYW5nbGUtZG93blwiPjwvaT5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2ICpuZ0lmPVwiY2FyZFNlbGVjdGVkVHlwZSA9PSAnaHRtbCcgfHwgY2FyZFNlbGVjdGVkVHlwZSA9PSAndHMnXCI+XG4gICAgICAgIDxpbWcgY2xhc3M9XCJzdG9yZWQtaWNvbi1hbGlnbnNcIiBzcmM9XCJhc3NldHMvcGF5bWVudFR5cGUve3tjYXJkTG9nb319LnN2Z1wiIChlcnJvcik9XCJlcnJvckhhbmRsZXIoKVwiPlxuICAgIDwvZGl2PlxuPC9kaXY+XG48ZGl2ICpuZ0lmPVwiIWNhcmRcIj5cbiAgICA8ZGl2ICpuZ0lmPVwicG9ydGFsTmFtZSAhPSAnQWNjZXB0UHJvcG9zYWwnXCI+XG4gICAgICAgIDxmb3JtIFtmb3JtR3JvdXBdPVwiY3JlZGl0Rm9ybVwiIGNhcmQgY29udGFpbmVyPVwiLmNhcmQtY29udGFpbmVyXCIgW2NhcmQtd2lkdGhdPVwiNDEwXCIgW21lc3NhZ2VzXT1cIm1lc3NhZ2VzXCJcbiAgICAgICAgICAgIFtwbGFjZWhvbGRlcnNdPVwicGxhY2Vob2xkZXJzXCIgW21hc2tzXT1cIm1hc2tzXCIgW2Zvcm1hdHRpbmddPVwiZm9ybWF0dGluZ1wiIFtkZWJ1Z109XCJkZWJ1Z1wiPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciBmb3JtR3JvdXBOYW1lPVwicGF5bWVudFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1tZC02IGNyZWRpdC1jYXJkLWhpZGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWNvbnRhaW5lclwiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiIWNvbXBhbnlOYW1lU2VsZWN0ZWRcIiBjbGFzcz1cImxhYmxlIHJlcXVpcmVkXCI+Q2FyZGhvbGRlcidzIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiY29tcGFueU5hbWVTZWxlY3RlZFwiIGNsYXNzPVwibGFibGUgcmVxdWlyZWRcIj5Db21wYW55IG5hbWU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmaWVsZFwiIHR5cGU9XCJ0ZXh0XCIgY2FyZC1uYW1lIGZvcm1Db250cm9sTmFtZT1cImNhcmROYW1lXCIgKGtleXVwKT1cImtleXByZXNzKClcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiIWNvbXBhbnlOYW1lU2VsZWN0ZWRcIiBjbGFzcz1cImNvbXBhbnktbmFtZS1saW5rXCIgKGNsaWNrKT1cImNvbXBhbnlOYW1lQ2xpY2soKVwiPk9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrIGhlcmUgdG8gdXNlIGEgY29tcGFueSBuYW1lPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cImNvbXBhbnlOYW1lU2VsZWN0ZWRcIiBjbGFzcz1cImNvbXBhbnktbmFtZS1saW5rXCIgKGNsaWNrKT1cImNvbXBhbnlOYW1lQ2xpY2soKVwiPk9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrIGhlcmUgdG8gdXNlIHlvdXIgcGVyc29uYWwgaW5mb3JtYXRpb248L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGFibGUgcmVxdWlyZWRcIj5DYXJkIG51bWJlcjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZpZWxkXCIgdHlwZT1cInRlbFwiIGF1dG9jb21wbGV0ZT1cImNjLW51bWJlclwiIGNhcmQtbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Db250cm9sTmFtZT1cImNhcmROdW1iZXJcIiBtYXhsZW5ndGg9XCIxOVwiIHBsYWNlaG9sZGVyPVwieHh4eCB4eHh4IHh4eHggeHh4eFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChrZXl1cCk9XCJzZXRDYXJkVHlwZSgpXCIgW2NsYXNzLmVycm9yX2ZpZWxkXT1cIiFpc0NhcmROdW1iZXJMZW5ndGhcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nICpuZ0lmPVwiY2FyZExvZ29cIiBjbGFzcz1cImljb24tYWxpZ25cIiBzcmM9XCJ7e2NhcmRJbWd9fVwiIChlcnJvcik9XCJkZWZhdWx0Q2FyZCgpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PVwiY2FyZCBuYW1lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgcm93LWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbCBjb250ZW50LWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsYWJsZSByZXF1aXJlZFwiPkNWQzwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmaWVsZFwiIHR5cGU9XCJwYXNzd29yZFwiIGF1dG9jb21wbGV0ZT1cIm5ldy1wYXNzd29yZFwiIHBhdHRlcm49XCJbMC05XSpcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRtb2RlPVwibnVtZXJpY1wiIGNhcmQtY3ZjIHBsYWNlaG9sZGVyPVwieHh4XCIgZm9ybUNvbnRyb2xOYW1lPVwiY2FyZEN2Y1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoa2V5dXApPVwia2V5cHJlc3MoKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wgY29udGVudC1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGFibGUgcmVxdWlyZWRcIj5FeHAgZGF0ZTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmaWVsZFwiIHR5cGU9XCJ0ZWxcIiBhdXRvY29tcGxldGU9XCJjYy1leHBcIiBjYXJkLWV4cGlyeVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiZXhwaXJ5XCIgcGxhY2Vob2xkZXI9XCJNTSAvIFlZXCIgKGtleXVwKT1cImtleXByZXNzKClcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudC1ncm91cFwiIHN0eWxlPVwibWFyZ2luLWJvdHRvbTogMDtcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxhYmxlIHJlcXVpcmVkXCI+RW1haWwgYWRkcmVzczwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmaWVsZFwiIGZvcm1Db250cm9sTmFtZT1cImVtYWlsXCIgdHlwZT1cImVtYWlsXCIgKGtleXVwKT1cImtleXByZXNzKClcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImVtYWlsLWluZm9cIj5UaGlzIGVtYWlsIHdpbGwgb25seSBiZSB1c2VkIHRvIGtlZXAgeW91IHVwZGF0ZWQgYWJvdXQgdGhlaXIgcGF5bWVudHM8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8L2Zvcm0+XG4gICAgPC9kaXY+XG4gICAgPGRpdiAqbmdJZj1cInBvcnRhbE5hbWUgPT0gJ0FjY2VwdFByb3Bvc2FsJ1wiPlxuICAgICAgICA8Zm9ybSBbZm9ybUdyb3VwXT1cImNyZWRpdEZvcm1cIiBjYXJkIGNvbnRhaW5lcj1cIi5jYXJkLWNvbnRhaW5lclwiIFtjYXJkLXdpZHRoXT1cIjQxMFwiIFttZXNzYWdlc109XCJtZXNzYWdlc1wiXG4gICAgICAgICAgICBbcGxhY2Vob2xkZXJzXT1cInBsYWNlaG9sZGVyc1wiIFttYXNrc109XCJtYXNrc1wiIFtmb3JtYXR0aW5nXT1cImZvcm1hdHRpbmdcIiBbZGVidWddPVwiZGVidWdcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTYgY3JlZGl0LWNhcmQtaGlkZVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1jb250YWluZXJcIj5cblxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTZcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCIhY29tcGFueU5hbWVTZWxlY3RlZFwiIGNsYXNzPVwibGFibGUgcmVxdWlyZWRcIj5DYXJkaG9sZGVyJ3MgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiY29tcGFueU5hbWVTZWxlY3RlZFwiIGNsYXNzPVwibGFibGUgcmVxdWlyZWRcIj5Db21wYW55IG5hbWU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZpZWxkXCIgdHlwZT1cInRleHRcIiBjYXJkLW5hbWUgZm9ybUNvbnRyb2xOYW1lPVwiY2FyZE5hbWVcIiAoa2V5dXApPVwia2V5cHJlc3MoKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cIiFjb21wYW55TmFtZVNlbGVjdGVkXCIgY2xhc3M9XCJjb21wYW55LW5hbWUtbGlua1wiIChjbGljayk9XCJjb21wYW55TmFtZUNsaWNrKClcIj5PclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrIGhlcmUgdG8gdXNlIGEgY29tcGFueSBuYW1lPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiY29tcGFueU5hbWVTZWxlY3RlZFwiIGNsYXNzPVwiY29tcGFueS1uYW1lLWxpbmtcIiAoY2xpY2spPVwiY29tcGFueU5hbWVDbGljaygpXCI+T3IgY2xpY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZXJlIHRvIHVzZSB5b3VyIHBlcnNvbmFsIGluZm9ybWF0aW9uPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudC1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxhYmxlIHJlcXVpcmVkXCI+Q2FyZCBudW1iZXI8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZpZWxkXCIgdHlwZT1cInRlbFwiIGF1dG9jb21wbGV0ZT1cImNjLW51bWJlclwiIGNhcmQtbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUNvbnRyb2xOYW1lPVwiY2FyZE51bWJlclwiIG1heGxlbmd0aD1cIjE5XCIgcGxhY2Vob2xkZXI9XCJ4eHh4IHh4eHggeHh4eCB4eHh4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoa2V5dXApPVwic2V0Q2FyZFR5cGUoKVwiIFtjbGFzcy5lcnJvcl9maWVsZF09XCIhaXNDYXJkTnVtYmVyTGVuZ3RoXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nICpuZ0lmPVwiY2FyZExvZ29cIiBjbGFzcz1cImljb24tYWxpZ25cIiBzcmM9XCJ7e2NhcmRJbWd9fVwiIChlcnJvcik9XCJkZWZhdWx0Q2FyZCgpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9XCJjYXJkIG5hbWVcIj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgcm93LWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sIGNvbnRlbnQtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGFibGUgcmVxdWlyZWRcIj5DVkM8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmaWVsZFwiIHR5cGU9XCJwYXNzd29yZFwiIGF1dG9jb21wbGV0ZT1cIm5ldy1wYXNzd29yZFwiIHBhdHRlcm49XCJbMC05XSpcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dG1vZGU9XCJudW1lcmljXCIgY2FyZC1jdmMgcGxhY2Vob2xkZXI9XCJ4eHhcIiBmb3JtQ29udHJvbE5hbWU9XCJjYXJkQ3ZjXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGtleXVwKT1cImtleXByZXNzKClcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbCBjb250ZW50LWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxhYmxlIHJlcXVpcmVkXCI+RXhwIGRhdGU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJmaWVsZFwiIHR5cGU9XCJ0ZWxcIiBhdXRvY29tcGxldGU9XCJjYy1leHBcIiBjYXJkLWV4cGlyeSBmb3JtQ29udHJvbE5hbWU9XCJleHBpcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk1NIC8gWVlcIiAoa2V5dXApPVwia2V5cHJlc3MoKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudC1ncm91cFwiIHN0eWxlPVwibWFyZ2luLWJvdHRvbTogMDtcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGFibGUgcmVxdWlyZWRcIj5FbWFpbCBhZGRyZXNzPC9kaXY+XG4gICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZmllbGRcIiBmb3JtQ29udHJvbE5hbWU9XCJlbWFpbFwiIHR5cGU9XCJlbWFpbFwiIChrZXl1cCk9XCJrZXlwcmVzcygpXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImVtYWlsLWluZm9cIj5UaGlzIGVtYWlsIHdpbGwgb25seSBiZSB1c2VkIHRvIGtlZXAgeW91IHVwZGF0ZWQgYWJvdXQgdGhlaXIgcGF5bWVudHM8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Zvcm0+XG4gICAgPC9kaXY+XG48L2Rpdj4iXX0=